{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/main.vue?4407","webpack:///./src/main.vue?95f9","webpack:///./src/main.vue","webpack:///./src/dice.ts","webpack:///./src/diceroll.ts","webpack:///./src/main.vue?3062","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","ref","class","results","join","reduce","v","Edge","randomQuaternion","random","u","w","Math","sqrt","sin","PI","cos","defineDieGeometry","rounding","edgeDetail","angleCCW","p1","p2","origin","normal","v1","vsub","v2","cosine","min","max","dot","theta","acos","cross","sortCCW","points","center","vadd","scale","sort","a","b","allFaces","allNormals","vertexCenters","vertices","map","A","set","faces","x","y","z","invert","B","applyMatrix3","assert","every","f","abs","point","edges","edge","o1","indexOf","o2","q1","setFromVectors","q2","q","slerp","v11","vmult","v21","v12","v22","inset","ccw","u0","unit","u1","offsets","diff","range","multiplyScalar","threeTextures","threeVertices","threeNormals","threeFaces","i0","uv","geometries","geometry","setAttribute","Float32Array","setIndex","sphere","translate","matrix","attributes","applyMatrix4","defineDieShape","normals","defineDieModel","numFaces","fn","edgeLengths","i1","i2","distance","some","findFaces","target","maxDepth","cycles","queue","pop","node","path","next","otherVertex","includes","edgesPerFace","faceEdges","Set","e","add","faceVertices","find","almostEquals","face","defineDieTexture","canvas","document","createElement","width","height","context","getContext","text","rotation","offset","rotate","fillText","resetTransform","texture","defineDie","model","shape","Die","createObject","die","material","g","mesh","castShadow","createBody","mass","body","initRoll","roll","position","clone","quaternion","orientation","velocity","angularVelocity","update","resolve","spin","lengthSquared","UNIT_Y","undefined","d4Model","setFromAxisAngle","UNIT_Z","q3","mult","q4","leg","d4Shape","d4Texture","ctx","fillStyle","fillRect","textAlign","textBaseline","font","d4Geometry","d4Results","d4","d6Model","d6Shape","d6Texture","d6Geometry","d6Results","d6","d8Model","SQRT2","d8Shape","d8Texture","d8Geometry","d8Results","d8","d10Model","edge1","a1","r1","h1","r2","a2","atan","a3","lawOfSines","legLength","legAngle1","asin","legAngle2","tall","UNIT_X","negate","d10Shape","d10Texture","d10Geometry","d10Results","d10","d12Model","phi","d12Shape","d12Geometry","d12Texture","d12Results","d12","d20Model","d20Shape","d20Geometry","d20Texture","d20Results","d20","loadDice","rollDie","velDir","spinDir","initScene","scene","camera","lookAt","renderer","alpha","antialias","shadowMap","enabled","type","ambientLight","halfDiagonal","right","top","directionalLight1","shadow","mapSize","near","far","bottom","left","tableGeometry","tableMaterial","opacity","table","rotateX","receiveShadow","initWorld","viewport","world","gravity","wallMaterial","floorMaterial","floor","STATIC","walls","addBody","addContactMaterial","defaultMaterial","friction","initDice","readyState","addEventListener","dice","box","getBoundingClientRect","objects","allDice","Reflect","ownKeys","k","pickers","setFromUnitVectors","copy","sub","normalize","applyQuaternion","multiply","hitTest","pos","picker","picking","onMouseEvent","offsetX","offsetY","pick","active","remove","removeBody","render","style","cursor","axis","updateMatrix","step","setZero","done","bumps","contacts","bi","bj","strength","time","wall","applyForce","dir","requestAnimationFrame","setup","props","__exports__","app","mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,MAAS,GAGNK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,GAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,sGCvJT,W,oCCAA,W,yHCCUyC,IAAI,W,SAENC,MAAM,W,4EAFZ,eAAuB,SAAvB,EAAuB,UAEK,EAAAC,S,iBAA5B,eAKO,OALP,EAKO,C,8BAJF,EAAAA,QAAQC,KAAI,QAAU,IACzB,GAAgB,EAAAD,QAAQvD,OAAM,G,iBAA9B,eAEW,gB,eAFyB,MAChC,eAAG,EAAAuD,QAAQE,QAAM,SAAErC,EAAGsC,GAAL,OAAWtC,EAAIsC,IAAC,Q,6DCWxBC,EAgCA,E,odA8EX,SAAUC,EAAiBC,GAC/B,IAAMC,EAAID,IACJH,EAAIG,IACJE,EAAIF,IAEV,OAAO,IAAI,OACTG,KAAKC,KAAK,EAAIH,GAAKE,KAAKE,IAAI,EAAIF,KAAKG,GAAKT,GAC1CM,KAAKC,KAAK,EAAIH,GAAKE,KAAKI,IAAI,EAAIJ,KAAKG,GAAKT,GAC1CM,KAAKC,KAAKH,GAAKE,KAAKE,IAAI,EAAIF,KAAKG,GAAKJ,GACtCC,KAAKC,KAAKH,GAAKE,KAAKI,IAAI,EAAIJ,KAAKG,GAAKJ,IAI1C,SAASM,EAAkB5C,GACzB,OAAO,SAAC6C,EAAUC,GAChB,SAASC,EAASC,EAAUC,EAAUC,EAAcC,GAClD,IAAMC,EAAKJ,EAAGK,KAAKH,GACbI,EAAKL,EAAGI,KAAKH,GACbK,EAAShB,KAAKiB,IAAI,EAAGjB,KAAKkB,KAAK,EAAGL,EAAGM,IAAIJ,GAAMF,EAAG7E,SAAW+E,EAAG/E,WAChEoF,EAAQpB,KAAKqB,KAAKL,GAClBM,EAAQT,EAAGS,MAAMP,GAAII,IAAIP,GAE/B,OAAIU,GAAS,EACJF,EAEU,EAAVpB,KAAKG,GAASiB,EAIzB,SAASG,EAAQC,EAAgBZ,GAC/B,IAD2C,EACrCa,EAAS,IAAI,OADwB,iBAE3BD,GAF2B,IAE3C,gCAAW9B,EAAX,QAAwB+B,EAAOC,KAAKhC,EAAG+B,IAFI,8BAG3CA,EAAOE,MAAM,EAAIH,EAAOxF,OAAQyF,GAEhC,IAAMpC,EAAMmC,EAAO,GACnB,OAAOA,EAAOpC,QAAQwC,MAAK,SAACC,EAAGC,GAC7B,OAAOtB,EAASnB,EAAKwC,EAAGJ,EAAQb,GAAUJ,EAASnB,EAAKyC,EAAGL,EAAQb,MAIvE,IA1B8B,EA0BxBmB,EAAgC,GAChCC,EAAqB,GAErBC,EAAgBxE,EAAEyE,SAASC,KAAI,SAAAzC,GACnC,IAAM0C,GAAI,IAAI,QAAUC,IACtB3C,EAAE4C,MAAM,GAAG1B,OAAO2B,EAAG7C,EAAE4C,MAAM,GAAG1B,OAAO4B,EAAG9C,EAAE4C,MAAM,GAAG1B,OAAO6B,EAC5D/C,EAAE4C,MAAM,GAAG1B,OAAO2B,EAAG7C,EAAE4C,MAAM,GAAG1B,OAAO4B,EAAG9C,EAAE4C,MAAM,GAAG1B,OAAO6B,EAC5D/C,EAAE4C,MAAM,GAAG1B,OAAO2B,EAAG7C,EAAE4C,MAAM,GAAG1B,OAAO4B,EAAG9C,EAAE4C,MAAM,GAAG1B,OAAO6B,GAG9DL,EAAEM,SAEF,IAAMC,EAAI,IAAI,QAASrC,GAAWA,GAAWA,GACvCiC,EAAII,EAAEC,aAAaR,GACnBI,EAAI,IAAI,OAAKD,EAAEA,EAAGA,EAAEC,EAAGD,EAAEE,GAI/B,OAFA,OAAAI,EAAA,MAAOnD,EAAE4C,MAAMQ,OAAM,SAAAC,GAAC,OAAI/C,KAAKgD,IAAID,EAAEnC,OAAOO,IAAIqB,GAAKlC,GAAY,QAAO,YAEjEZ,EAAEuD,MAAMvB,KAAKc,MA5CQ,iBA+CX/E,EAAEyF,OA/CS,IA+C9B,2BAQE,IAR0B,IAAjBC,EAAiB,QACpBC,EAAKnB,EAAcxE,EAAEyE,SAASmB,QAAQF,EAAKjB,SAAS,KACpDoB,EAAKrB,EAAcxE,EAAEyE,SAASmB,QAAQF,EAAKjB,SAAS,KAEpDqB,GAAK,IAAI,QAAOC,eAAeL,EAAKb,MAAM,GAAG1B,OAAQuC,EAAKb,MAAM,GAAG1B,QACnE6C,GAAK,IAAI,QAAOD,eAAeL,EAAKb,MAAM,GAAG1B,OAAQuC,EAAKb,MAAM,GAAG1B,QACnE8C,EAAI,IAAI,OAEL,EAAI,EAAG,EAAInD,IAAc,EAAG,CACnCgD,EAAGI,MAAMF,EAAI,EAAIlD,EAAYmD,GAC7B,IAAME,EAAMR,EAAG1B,KAAKgC,EAAEG,MAAMV,EAAKb,MAAM,GAAG1B,OAAOe,MAAMrB,KACjDwD,EAAMR,EAAG5B,KAAKgC,EAAEG,MAAMV,EAAKb,MAAM,GAAG1B,OAAOe,MAAMrB,KAEvDiD,EAAGI,MAAMF,GAAK,EAAI,GAAKlD,EAAYmD,GACnC,IAAMK,EAAMX,EAAG1B,KAAKgC,EAAEG,MAAMV,EAAKb,MAAM,GAAG1B,OAAOe,MAAMrB,KACjD0D,EAAMV,EAAG5B,KAAKgC,EAAEG,MAAMV,EAAKb,MAAM,GAAG1B,OAAOe,MAAMrB,KAEvDiD,EAAGI,MAAMF,GAAK,EAAI,IAAOlD,EAAYmD,GACrC,IAAM9C,EAAS8C,EAAEG,MAAMV,EAAKb,MAAM,GAAG1B,QAErCmB,EAASzF,KAAKiF,EAAQ,CAACqC,EAAKE,EAAKE,EAAKD,GAAMnD,GAAQuB,KAAI,SAAAzC,GAAC,MAAI,CAACA,EAAG,IAAI,OAAQ,GAAK,SAClFsC,EAAW1F,KAAKsE,IApEU,8BAwE9B,IAxE8B,eAwErB9E,GACP,IAzE4B,EAyEtBmI,EAAQxG,EAAE6E,MAAMxG,GAAGoG,SAASC,KAAI,SAAAzC,GAAC,OAAIuC,EAAcxE,EAAEyE,SAASmB,QAAQ3D,IAAIgC,KAAKjE,EAAE6E,MAAMxG,GAAG8E,OAAOe,MAAMrB,OACvG4D,EAAM3C,EAAQ0C,EAAOxG,EAAE6E,MAAMxG,GAAG8E,QAEhCa,EAAS,IAAI,OA5ES,iBA6EZyC,GA7EY,IA6E5B,gCAAW,EAAX,QAAqBzC,EAAOC,KAAK,EAAGD,IA7ER,8BA8E5BA,EAAOE,MAAM,EAAIuC,EAAIlI,OAAQyF,GAE7B,IAhF4B,EAgFtB0C,EAAKD,EAAI,GAAGpD,KAAKW,GAAQ2C,OACzBC,EAAKF,EAAG7C,MAAM7D,EAAE6E,MAAMxG,GAAG8E,QAEzB0D,EAAUJ,EAAI/B,KAAI,SAAAzE,GACtB,IAAM6G,EAAO7G,EAAEoD,KAAKW,GACdc,EAAIgC,EAAKpD,IAAIkD,GACb7B,EAAI+B,EAAKpD,IAAIgD,GAEnB,MAAO,CAACzG,EAAG,IAAI,OAAQ6E,EAAGC,OAGtBvB,EAAMqD,EAAQ7E,QAAO,SAACwB,EAAKvB,GAAN,OAAY,IAAI,OAAQM,KAAKiB,IAAIA,EAAIsB,EAAG7C,EAAE,GAAG6C,GAAIvC,KAAKiB,IAAIA,EAAIuB,EAAG9C,EAAE,GAAG8C,MAAK,IAAI,QACpGtB,EAAMoD,EAAQ7E,QAAO,SAACyB,EAAKxB,GAAN,OAAY,IAAI,OAAQM,KAAKkB,IAAIA,EAAIqB,EAAG7C,EAAE,GAAG6C,GAAIvC,KAAKkB,IAAIA,EAAIsB,EAAG9C,EAAE,GAAG8C,MAAK,IAAI,QAEpGgC,EAAQxE,KAAKkB,KAAKD,EAAIsB,GAAItB,EAAIuB,EAAGtB,EAAIqB,EAAGrB,EAAIsB,GA9FtB,iBAgGZ8B,GAhGY,IAgG5B,2BAAyB,KAAdxG,EAAc,QACvBA,EAAE,GAAG2G,eAAe,EAAID,GACxB1G,EAAE,GAAGyE,GAAKzE,EAAE,GAAGyE,EAAI,EAAI,GAAMzG,GAAK2B,EAAE6E,MAAMtG,OAC1C8B,EAAE,GAAG0E,EAAI1E,EAAE,GAAG0E,EAAI,EAAI,IAnGI,8BAsG5BT,EAASzF,KAAKgI,GACdtC,EAAW1F,KAAKmB,EAAE6E,MAAMxG,GAAG8E,SA/BpB9E,EAAI,EAAGA,EAAI2B,EAAE6E,MAAMtG,SAAUF,EAAG,EAAhCA,GAuCT,IALA,IAAM4I,EAA0B,GAC1BC,EAA0B,GAC1BC,EAAyB,GACzBC,EAAuB,GAEpB,EAAI,EAAG,EAAI9C,EAAS/F,SAAU,EAAG,CACxC,IADwC,EAClC8I,EAAKH,EAAc3I,OAAS,EADM,iBAGlB+F,EAAS,IAHS,IAGxC,2BAAmC,iCAAvBrC,EAAuB,KAApBqF,EAAoB,KACjCJ,EAAcrI,KAAKoD,EAAE6C,EAAG7C,EAAE8C,EAAG9C,EAAE+C,GAC/BiC,EAAcpI,KAAKyI,EAAGxC,EAAGwC,EAAGvC,GAC5BoC,EAAatI,KAAK0F,EAAW,GAAGO,EAAGP,EAAW,GAAGQ,EAAGR,EAAW,GAAGS,IAN5B,8BASxCoC,EAAWvI,KAAKwI,EAAIA,EAAK,EAAGA,EAAK,GAC7B/C,EAAS,GAAG/F,QAAU,GAAG6I,EAAWvI,KAAKwI,EAAK,EAAGA,EAAK,EAAGA,EAAK,GAC9D/C,EAAS,GAAG/F,QAAU,GAAG6I,EAAWvI,KAAKwI,EAAK,EAAGA,EAAK,EAAGA,EAAK,GAGpE,IAAME,EAA+B,GAE/BC,EAAW,IAAI,OACrBA,EAASC,aAAa,WAAY,IAAI,OAAgB,IAAIC,aAAaR,GAAgB,IACvFM,EAASC,aAAa,SAAU,IAAI,OAAgB,IAAIC,aAAaP,GAAe,IACpFK,EAASC,aAAa,KAAM,IAAI,OAAgB,IAAIC,aAAaT,GAAgB,IACjFO,EAASG,SAASP,GAElBG,EAAW1I,KAAK2I,GArIc,uBAuIdhD,GAvIc,IAuI9B,2BAA+B,KAApB,EAAoB,QACvBoD,EAAS,IAAI,OAAe/E,GAClC+E,EAAOC,UAAU,EAAE/C,EAAG,EAAEC,EAAG,EAAEC,GAC7B,IAAM8C,EAAS,IAAI,OACnBA,EAAOlD,IAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACxDgD,EAAOG,WAAWT,GAAGU,aAAaF,GAClCP,EAAW1I,KAAK+I,IA7IY,8BAgJ9B,OAAOL,GAIX,SAASU,EAAejI,GACtB,OAAO,IAAI,OAAiB,CAC1ByE,SAAUzE,EAAEyE,SAASC,KAAI,SAAAzC,GAAC,OAAIA,EAAEuD,SAChC0C,QAASlI,EAAE6E,MAAMH,KAAI,SAAAY,GAAC,OAAIA,EAAEnC,UAC5B0B,MAAO7E,EAAE6E,MAAMH,KAAI,SAAAY,GAAC,OAAIA,EAAEb,SAASC,KAAI,SAAAzC,GAAC,OAAIjC,EAAEyE,SAASmB,QAAQ3D,WAInE,SAASkG,EAAeC,EAAkBC,GAOxC,IANA,MAAiCA,EAAG,GAApC,oBAAOtE,EAAP,KAAkBuE,EAAlB,WAEM7D,EAAqB,GACrBgB,EAAgB,GAChBZ,EAAgB,GAEb0D,EAAK,EAAGA,EAAKxE,EAAOxF,SAAUgK,EAAI,CACzC,IAAMnF,EAAa,CACjBoC,MAAOzB,EAAOwE,GACd9C,MAAO,GACPZ,MAAO,IAGTJ,EAAS5F,KAAKuE,GAEd,IATyC,eAShCoF,GACP,IAAMlF,EAAKmB,EAAS+D,GAEdC,EAAWrF,EAAGoC,MAAMnC,KAAKC,EAAGkC,OAClC,GAAI8C,EAAYI,MAAK,SAAA3I,GAAC,OAAIwC,KAAKgD,IAAIxF,EAAI0I,EAASlK,UAAY,QAAO,CACjE,IAAMmH,EAAa,CACjBjB,SAAU,CAACrB,EAAIE,GACfuB,MAAO,IAGTzB,EAAGqC,MAAM5G,KAAK6G,GACdpC,EAAGmC,MAAM5G,KAAK6G,GACdD,EAAM5G,KAAK6G,KAZN8C,EAAK,EAAGA,EAAKD,IAAMC,EAAI,EAAvBA,GAiBX,SAASG,EAAUC,EAAgB1F,EAAgB2F,GACjD,IAAMC,EAAS,GACTC,EAAQ,CACZ,CAAC7F,EAAQ,KAGX,MAAO6F,EAAMxK,OAAS,EAAG,CACvB,IADuB,EACvB,EAAqBwK,EAAMC,MAA3B,sBAAOC,EAAP,KAAaC,EAAb,KADuB,iBAGJD,EAAKxD,OAHD,IAGvB,2BAA+B,KAApBC,EAAoB,QACvByD,EAAOjH,EAAKkH,YAAY1D,EAAMuD,GAChCC,EAAKG,SAAS3D,KAEdyD,GAAQP,EACVE,EAAOjK,KAAP,yBAAgBqK,GAAhB,CAAsBxD,KACbwD,EAAK3K,OAAS,EAAIsK,GAC3BE,EAAMlK,KAAK,CAACsK,EAAD,yBAAWD,GAAX,CAAiBxD,QAVT,+BAezB,OAAOoD,EAMT,IAHA,IAAMQ,EAAe,EAAI7D,EAAMlH,OAAS6J,EAElC9D,EAAW,GACjB,MAAgBG,EAAhB,eAA0B,CAArB,IAAMxC,EAAC,KACVqC,EAASzF,KAAT,MAAAyF,EAAQ,eAASqE,EAAU1G,EAAGA,EAAGqH,KAGnC,IAhEoF,iBAgE/E,IAhE+E,EAgEzEC,EAAS,KACZ3E,EAAM,IAAI4E,IAjEkE,iBAkElED,GAlEkE,IAkElF,kCAAWE,EAAX,yBAA2CA,EAAEhF,UAA7C,IAA2B,gCAAWlD,EAAX,QAA4BqD,EAAI8E,IAAInI,IAA/D,0BAAA+D,MAlEkF,8BAmElF,IAAMqE,EAAe,eAAI/E,GAEnBzB,EAAUwG,EAAa,GAAGnE,MAAMnC,KAAKsG,EAAa,GAAGnE,OAAQ3B,MAAM8F,EAAa,GAAGnE,MAAMnC,KAAKsG,EAAa,GAAGnE,QAAQmB,OAC5H,GAAI9B,EAAM+E,MAAK,SAAAtE,GAAC,OAAIA,EAAEnC,OAAO0G,aAAa1G,MAAU,iBAEpD,IAxEkF,EAwE5Ea,EAAS,IAAI,OAxE+D,iBAyElE2F,GAzEkE,IAyElF,gCAAW,EAAX,QAA8B3F,EAAOC,KAAK,EAAEuB,MAAOxB,IAzE+B,8BA4ElF,GAFAA,EAAOE,MAAM,EAAIyF,EAAapL,OAAQyF,GAElCA,EAAON,IAAIP,GAAU,EAAG,iBAE5B,IA9EkF,EA8E5E2G,EAAO,CACX3G,SACAsC,MAAO8D,EACP9E,SAAUkF,GAjFsE,iBAoFlEA,GApFkE,IAoFlF,gCAAW,EAAX,QAA8B,EAAE9E,MAAMhG,KAAKiL,IApFuC,qDAqFlEP,GArFkE,IAqFlF,gCAAW,EAAX,QAA2B,EAAE1E,MAAMhG,KAAKiL,IArF0C,8BAsFlFjF,EAAMhG,KAAKiL,IAtBb,MAAwBxF,EAAxB,eAAkC,IA0BlC,OADA,OAAAc,EAAA,MAAOK,EAAMJ,OAAM,SAAAoE,GAAC,OAAsB,GAAlBA,EAAE5E,MAAMtG,UAAc,aACvC,CAAEkG,WAAUgB,QAAOZ,SAG5B,SAASkF,EAAiB/J,EAAUqI,GAClC,OAAO,WACL,IAAM2B,EAASC,SAASC,cAAc,UACtCF,EAAOG,MAAyB,IAAjBnK,EAAE6E,MAAMtG,OACvByL,EAAOI,OAAS,IAEhB,IAAMC,EAAUL,EAAOM,WAAW,MAClC,OAAAlF,EAAA,MAAkB,MAAXiF,EAAiB,WAExBhC,EAAGgC,GAAS,SAACE,EAAMT,EAAMU,EAAUC,GACjCJ,EAAQxC,UAAU,IAAM,IAAMiC,EAAM,KACpCO,EAAQK,OAAOF,EAAWjI,KAAKG,IAC/B2H,EAAQxC,UAAU,EAAG4C,GACrBJ,EAAQM,SAASJ,EAAM,EAAG,GAC1BF,EAAQO,oBAGV,IAAMC,EAAU,IAAI,OAAcb,GAClC,OAAOa,GAIX,SAASC,EAAUC,EAAcC,EAAcH,EAAwBrD,EAAsE1F,GAC3I,OAAO,SAACe,EAAkBC,GACxB,MAAO,CAAEiI,QAAOC,QAAOH,QAASA,IAAWrD,SAAUA,EAAS3E,EAAUC,GAAahB,aA7YzF,SAAiBI,GACf,SAAgBkH,EAAYK,EAASxH,GACnC,OAAOwH,EAAEhF,SAAS,IAAMxC,EACpBwH,EAAEhF,SAAS,GACXgF,EAAEhF,SAAS,GAHD,EAAA2E,YAAW,GAD7B,CAAiBlH,MAAI,KAgCrB,SAAiB+I,GACf,SAAgBC,EAAaC,GAC3B,IAAMC,EAAW,IAAI,OAAqB,CACxC1G,IAAKyG,EAAIN,UAGLxJ,EAAS,IAAI,OAOnB,OANAA,EAAOqI,IAAP,MAAArI,EAAM,eAAQ8J,EAAI3D,SAAS9C,KAAI,SAAA2G,GAC7B,IAAMC,EAAO,IAAI,OAAKD,EAAGD,GAEzB,OADAE,EAAKC,YAAa,EACXD,OAGFjK,EAGT,SAAgBmK,EAAWL,GACzB,OAAO,IAAI,OAAK,CACdM,KAAM,EACNT,MAAOG,EAAIH,QAIf,SAAgB/J,EAAOkK,GACrB,IAAMO,EAAOF,EAAWL,GAClB9J,EAAS6J,EAAaC,GAE5B,MAAO,CAAEA,MAAKO,OAAMrK,UAGtB,SAAgBsK,EAAStL,EAAcuL,GACrCvL,EAAEqL,KAAKG,SAAWD,EAAKC,SAASC,QAChCzL,EAAEqL,KAAKK,WAAaH,EAAKI,YAAYF,QACrCzL,EAAEqL,KAAKO,SAAWL,EAAKK,SAASH,QAChCzL,EAAEqL,KAAKQ,gBAAkBN,EAAKM,gBAAgBJ,QAGhD,SAAgBK,EAAO9L,GACrBA,EAAEgB,OAAOwK,SAASjH,IAChBvE,EAAEqL,KAAKG,SAAS/G,EAChBzE,EAAEqL,KAAKG,SAAS9G,EAChB1E,EAAEqL,KAAKG,SAAS7G,GAGlB3E,EAAEgB,OAAO0K,WAAWnH,IAClBvE,EAAEqL,KAAKK,WAAWjH,EAClBzE,EAAEqL,KAAKK,WAAWhH,EAClB1E,EAAEqL,KAAKK,WAAW/G,EAClB3E,EAAEqL,KAAKK,WAAWzJ,GAItB,SAAgB8J,EAAQ/L,GACtB,IAAIgM,EAAOhM,EAAEqL,KAAKQ,gBAAgBI,gBAC9BL,EAAW5L,EAAEqL,KAAKO,SAASK,gBAC3BxC,EAAOzJ,EAAE8K,IAAIJ,MAAMlG,MAAM+E,MAAK,SAAAtE,GAAC,OAAIjF,EAAEqL,KAAKK,WAAW3F,MAAMd,EAAEnC,QAAQO,IAAI,OAAK6I,SAAW,OAE7F,OAAIF,EAAO,MAASJ,EAAW,WAAkBO,IAAT1C,EAC/BA,EAEA,KA3DK,EAAAoB,aAAY,EAeZ,EAAAM,WAAU,EAOV,EAAAvK,OAAM,EAON,EAAA0K,SAAQ,EAOR,EAAAQ,OAAM,EAeN,EAAAC,QAAO,EApDzB,CAAiB,MAAG,KAiXb,IAAMK,EAAUtE,EAAe,GAAG,SAAAjE,GACvC,IAAMwB,EAAe,GAARxB,EAAa,GAEpB8B,GAAK,IAAI,QAAO0G,iBAAiB,OAAKC,QAASpK,KAAKqB,MAAM,EAAI,IAC9DgJ,GAAK,IAAI,QAAOF,iBAAiB,OAAKH,OAAkB,EAAVhK,KAAKG,GAAS,GAAGmK,KAAK7G,GACpE8G,GAAK,IAAI,QAAOJ,iBAAiB,OAAKH,OAAmB,GAAVhK,KAAKG,GAAS,GAAGmK,KAAK7G,GAErE+G,EAAM,OAAKR,OAAOrI,MAAMwB,EAAOnD,KAAKC,KAAK,GAAK,GAE9CuB,EAAS,CACbgJ,EACA/G,EAAGI,MAAM2G,GACTH,EAAGxG,MAAM2G,GACTD,EAAG1G,MAAM2G,IAGX,MAAO,CAAChJ,EAAQ2B,MAGLsH,EAAU/E,EAAewE,GAEzBQ,EAAYlD,EAAiB0C,GAAS,SAACS,EAAKpD,GACvDoD,EAAIC,UAAY,OAChBD,EAAIE,SAAS,EAAG,EAAG,KAAS,KAE5BF,EAAIG,UAAY,SAChBH,EAAII,aAAe,SACnBJ,EAAIK,KAAO,oBACXL,EAAIC,UAAY,MAEhBrD,EAAK,IAAK,EAAG,GAAI,KACjBA,EAAK,IAAK,EAAG,EAAI,GAAI,KACrBA,EAAK,IAAK,EAAG,EAAI,GAAI,KAErBA,EAAK,IAAK,EAAG,GAAI,KACjBA,EAAK,IAAK,EAAG,EAAI,GAAI,KACrBA,EAAK,IAAK,EAAG,EAAI,GAAI,KAErBA,EAAK,IAAK,EAAG,GAAI,KACjBA,EAAK,IAAK,EAAG,EAAI,GAAI,KACrBA,EAAK,IAAK,EAAG,EAAI,GAAI,KAErBA,EAAK,IAAK,EAAG,GAAI,KACjBA,EAAK,IAAK,EAAG,EAAI,GAAI,KACrBA,EAAK,IAAK,EAAG,EAAI,GAAI,QAGV0D,EAAa5K,EAAkB6J,GAE/BgB,EAAY,CAAC,EAAG,EAAG,EAAG,GAEtBC,EAAK5C,EAAU2B,EAASO,EAASC,EAAWO,EAAYC,GAExDE,EAAUxF,EAAe,GAAG,SAAAjE,GAIvC,IAHA,IAAMwB,EAAOxB,EAEPH,EAAS,GACN1F,EAAI,EAAGA,EAAI,IAAKA,EACvB0F,EAAOlF,KAAK,IAAI,OACT,EAAJR,EAAaqH,EAAO,GAAKA,EAAO,EAC5B,EAAJrH,EAAaqH,EAAO,GAAKA,EAAO,EAC5B,EAAJrH,EAAaqH,EAAO,GAAKA,EAAO,IAIrC,MAAO,CAAC3B,EAAQ2B,MAGLkI,EAAU3F,EAAe0F,GAEzBE,EAAY9D,EAAiB4D,GAAS,SAACT,EAAKpD,GACvDoD,EAAIC,UAAY,OAChBD,EAAIE,SAAS,EAAG,EAAG,KAAS,KAE5BF,EAAIG,UAAY,SAChBH,EAAII,aAAe,SACnBJ,EAAIK,KAAO,oBACXL,EAAIC,UAAY,MAEhBrD,EAAK,IAAK,EAAG,EAAI,EAAG,IACpBA,EAAK,IAAK,EAAG,EAAI,EAAG,IACpBA,EAAK,IAAK,EAAG,EAAI,EAAG,IAEpBA,EAAK,IAAK,EAAG,EAAI,EAAG,IACpBA,EAAK,IAAK,EAAG,EAAI,EAAG,IACpBA,EAAK,IAAK,EAAG,EAAI,EAAG,OAGTgE,EAAalL,EAAkB+K,GAE/BI,EAAY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAE5BC,EAAKlD,EAAU6C,EAASC,EAASC,EAAWC,EAAYC,GAExDE,EAAU9F,EAAe,GAAG,SAAAjE,GACvC,IAAMwB,EAAe,KAARxB,EAAe,GAEtBY,EAAIY,EAAOnD,KAAK2L,MAChBnK,EAAS,CACb,IAAI,QAAMe,EAAG,EAAG,GAChB,IAAI,QAAMA,EAAG,EAAG,GAChB,IAAI,OAAK,GAAIA,EAAG,GAChB,IAAI,OAAK,GAAIA,EAAG,GAChB,IAAI,OAAK,EAAG,GAAIA,GAChB,IAAI,OAAK,EAAG,GAAIA,IAGlB,MAAO,CAACf,EAAQ2B,MAGLyI,EAAUlG,EAAegG,GAEzBG,EAAYrE,EAAiBkE,GAAS,SAACf,EAAKpD,GACvDoD,EAAIC,UAAY,OAChBD,EAAIE,SAAS,EAAG,EAAG,KAAS,KAE5BF,EAAIG,UAAY,SAChBH,EAAII,aAAe,SACnBJ,EAAIK,KAAO,oBACXL,EAAIC,UAAY,MAEhBrD,EAAK,IAAK,EAAG,EAAI,EAAG,GACpBA,EAAK,IAAK,EAAG,EAAI,EAAG,GACpBA,EAAK,IAAK,EAAG,EAAI,EAAG,GACpBA,EAAK,IAAK,EAAG,EAAI,EAAG,GAEpBA,EAAK,IAAK,EAAG,EAAI,EAAG,GACpBA,EAAK,IAAK,EAAG,EAAI,EAAG,GACpBA,EAAK,IAAK,EAAG,EAAI,EAAG,GACpBA,EAAK,IAAK,EAAG,EAAI,EAAG,MAGTuE,EAAazL,EAAkBqL,GAE/BK,EAAY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAElCC,EAAKzD,EAAUmD,EAASE,EAASC,EAAWC,EAAYC,GAExDE,EAAWrG,EAAe,IAAI,SAAAjE,GACzC,IAAMuK,EAAQvK,EAERP,EAAkB,EAAVpB,KAAKG,GAAS,EACtBgM,EAAe,IAAVnM,KAAKG,GAEViM,EAAKpM,KAAKE,IAAIiM,GAAMD,EACpBG,EAAKrM,KAAKI,IAAI+L,GAAMD,EAEpBI,EAAKtM,KAAKI,IAAIgB,EAAQ,GAAKgL,EAC3BG,EAAKvM,KAAKwM,KAAKF,EAAKD,GACpBI,EAAKzM,KAAKG,GAAKgM,EAAKI,EAEpBG,EAAaR,EAAQlM,KAAKE,IAAIqM,GAC9B1E,EAAS6E,EAAa1M,KAAKE,IAAIuM,GAE/BE,EAAY3M,KAAKC,KAAK4H,EAASA,EAAS,EAAIqE,EAAQA,EAAQrE,EAASqE,EAAQlM,KAAKI,IAAI+L,IACtFS,EAAY5M,KAAK6M,KAAKX,EAAQlM,KAAKE,IAAIiM,GAAMQ,GAC7CG,EAAY9M,KAAKG,GAAK,EAAIyM,EAE1BrJ,GAAK,IAAI,QAAO4G,iBAAiB,OAAKH,OAAQ5I,GAC9CqC,GAAK,IAAI,QAAO0G,iBAAiB,OAAKC,OAAQ0C,GAE9CC,EAAO,OAAK/C,OAAOrI,MAAMkG,EAAS,GAClC2C,EAAM,OAAKwC,OAAOrL,MAAMgL,GAExBnL,EAAS,CACbuL,EACAtJ,EAAGI,MAAM2G,GACTjH,EAAGM,MAAMJ,EAAGI,MAAM2G,IAClBjH,EAAGM,MAAMN,EAAGM,MAAMJ,EAAGI,MAAM2G,KAC3BjH,EAAGM,MAAMN,EAAGM,MAAMN,EAAGM,MAAMJ,EAAGI,MAAM2G,MACpCjH,EAAGM,MAAMN,EAAGM,MAAMN,EAAGM,MAAMN,EAAGM,MAAMJ,EAAGI,MAAM2G,OAC7CuC,EAAKE,SACLxJ,EAAGI,MAAM2G,EAAIyC,UACb1J,EAAGM,MAAMJ,EAAGI,MAAM2G,EAAIyC,WACtB1J,EAAGM,MAAMN,EAAGM,MAAMJ,EAAGI,MAAM2G,EAAIyC,YAC/B1J,EAAGM,MAAMN,EAAGM,MAAMN,EAAGM,MAAMJ,EAAGI,MAAM2G,EAAIyC,aACxC1J,EAAGM,MAAMN,EAAGM,MAAMN,EAAGM,MAAMN,EAAGM,MAAMJ,EAAGI,MAAM2G,EAAIyC,eAGnD,MAAO,CAACzL,EAAQA,EAAO,GAAGV,KAAKU,EAAO,IAAIxF,SAAUwF,EAAO,GAAGV,KAAKU,EAAO,IAAIxF,aAGnEkR,EAAWxH,EAAeuG,GAE1BkB,EAAa3F,EAAiByE,GAAU,SAACtB,EAAKpD,GACzDoD,EAAIC,UAAY,OAChBD,EAAIE,SAAS,EAAG,EAAG,KAAU,KAE7BF,EAAIG,UAAY,SAChBH,EAAII,aAAe,SACnBJ,EAAIK,KAAO,oBACXL,EAAIC,UAAY,MAEhBrD,EAAK,IAAK,EAAG,EAAG,GAChBA,EAAK,IAAK,EAAG,EAAG,GAChBA,EAAK,IAAK,EAAG,EAAG,GAChBA,EAAK,IAAK,EAAG,EAAG,GAChBA,EAAK,IAAK,EAAG,EAAG,GAEhBA,EAAK,IAAK,EAAG,EAAG,GAChBA,EAAK,IAAK,EAAG,EAAG,GAChBA,EAAK,IAAK,EAAG,EAAG,GAChBA,EAAK,IAAK,EAAG,EAAG,GAChBA,EAAK,KAAM,EAAG,EAAG,MAGN6F,EAAc/M,EAAkB4L,GAEhCoB,EAAa,CAAC,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAE1CC,EAAM/E,EAAU0D,EAAUiB,EAAUC,EAAYC,EAAaC,GAE7DE,EAAW3H,EAAe,IAAI,SAAAjE,GA8BzC,IA7BA,IAAMwB,EAAe,GAARxB,EACP6L,GAAO,EAAIxN,KAAKC,KAAK,IAAM,EAE3BuB,EAAS,CACb,IAAI,OAAK,EAAG,EAAG,GACf,IAAI,QAAM,EAAG,EAAG,GAChB,IAAI,OAAK,GAAI,EAAG,GAChB,IAAI,OAAK,EAAG,GAAI,GAChB,IAAI,QAAM,GAAI,EAAG,GACjB,IAAI,OAAK,GAAI,GAAI,GACjB,IAAI,QAAM,EAAG,GAAI,GACjB,IAAI,QAAM,GAAI,GAAI,GAElB,IAAI,OAAK,EAAGgM,EAAK,EAAIA,GACrB,IAAI,OAAK,GAAIA,EAAK,EAAIA,GACtB,IAAI,OAAK,EAAGA,GAAM,EAAIA,GACtB,IAAI,OAAK,GAAIA,GAAM,EAAIA,GAEvB,IAAI,OAAK,EAAIA,EAAK,EAAGA,GACrB,IAAI,OAAK,EAAIA,EAAK,GAAIA,GACtB,IAAI,QAAM,EAAIA,EAAK,EAAGA,GACtB,IAAI,QAAM,EAAIA,EAAK,GAAIA,GAEvB,IAAI,OAAKA,EAAK,EAAIA,EAAK,GACvB,IAAI,QAAMA,EAAK,EAAIA,EAAK,GACxB,IAAI,OAAKA,GAAM,EAAIA,EAAK,GACxB,IAAI,QAAMA,GAAM,EAAIA,EAAK,IAG3B,MAAoBhM,EAApB,gBAAK,IAAMyB,EAAK,KAAYA,EAAMtB,MAAMwB,EAAOqK,EAAM,EAAGvK,GAExD,MAAO,CAACzB,EAAQ2B,MAGLsK,EAAW/H,EAAe6H,GAE1BG,EAAcrN,EAAkBkN,GAEhCI,EAAanG,EAAiB+F,GAAU,SAAC5C,EAAKpD,GACzDoD,EAAIC,UAAY,OAChBD,EAAIE,SAAS,EAAG,EAAG,KAAU,KAE7BF,EAAIG,UAAY,SAChBH,EAAII,aAAe,SACnBJ,EAAIK,KAAO,oBACXL,EAAIC,UAAY,MAEhBrD,EAAK,IAAK,EAAG,EAAG,IAChBA,EAAK,IAAK,EAAG,IAAO,IACpBA,EAAK,IAAK,EAAG,GAAO,IACpBA,EAAK,IAAK,EAAG,EAAG,IAChBA,EAAK,IAAK,EAAG,IAAO,IACpBA,EAAK,IAAK,EAAG,IAAO,IAEpBA,EAAK,IAAK,EAAG,IAAO,IACpBA,EAAK,IAAK,EAAG,IAAO,IACpBA,EAAK,IAAK,EAAG,GAAO,IACpBA,EAAK,KAAM,GAAI,GAAO,IACtBA,EAAK,KAAM,EAAG,IAAO,IACrBA,EAAK,KAAM,GAAI,IAAO,OAGXqG,EAAa,CAAC,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAElDC,EAAMtF,EAAUgF,EAAUE,EAAUE,EAAYD,EAAaE,GAE7DE,EAAWlI,EAAe,IAAI,SAAAjE,GAqBzC,IApBA,IAAMwB,EAAe,GAARxB,EACP6L,GAAO,EAAIxN,KAAKC,KAAK,IAAM,EAE3BuB,EAAS,CACb,IAAI,OAAK,EAAG,EAAGgM,GACf,IAAI,OAAK,GAAI,EAAGA,GAChB,IAAI,OAAK,EAAG,GAAIA,GAChB,IAAI,OAAK,GAAI,GAAIA,GAEjB,IAAI,OAAK,EAAGA,EAAK,GACjB,IAAI,QAAM,EAAGA,EAAK,GAClB,IAAI,OAAK,GAAIA,EAAK,GAClB,IAAI,QAAM,GAAIA,EAAK,GAEnB,IAAI,OAAKA,EAAK,EAAG,GACjB,IAAI,OAAKA,EAAK,GAAI,GAClB,IAAI,QAAMA,EAAK,EAAG,GAClB,IAAI,QAAMA,EAAK,GAAI,IAGrB,MAAoBhM,EAApB,gBAAK,IAAMyB,EAAK,KAAYA,EAAMtB,MAAMwB,EAAO,EAAGF,GAElD,MAAO,CAACzB,EAAQ,GAAI2B,MAGT4K,EAAWrI,EAAeoI,GAE1BE,GAAc3N,EAAkByN,GAEhCG,GAAazG,EAAiBsG,GAAU,SAACnD,EAAKpD,GACzDoD,EAAIC,UAAY,OAChBD,EAAIE,SAAS,EAAG,EAAG,MAAU,KAE7BF,EAAIG,UAAY,SAChBH,EAAII,aAAe,SACnBJ,EAAIK,KAAO,oBACXL,EAAIC,UAAY,MAEhBrD,EAAK,IAAK,EAAG,EAAG,IAChBA,EAAK,IAAK,GAAI,EAAG,IACjBA,EAAK,IAAK,EAAG,EAAI,EAAG,IACpBA,EAAK,IAAK,GAAI,EAAI,EAAG,IACrBA,EAAK,IAAK,GAAI,EAAG,IACjBA,EAAK,IAAK,EAAG,EAAG,IAChBA,EAAK,IAAK,EAAG,EAAI,EAAG,IACpBA,EAAK,IAAK,GAAI,EAAI,EAAG,IACrBA,EAAK,IAAK,EAAG,EAAI,EAAG,IACpBA,EAAK,KAAM,GAAI,EAAG,IAElBA,EAAK,KAAM,GAAI,EAAG,IAClBA,EAAK,KAAM,EAAG,EAAI,EAAG,IACrBA,EAAK,KAAM,GAAI,EAAI,EAAG,IACtBA,EAAK,KAAM,GAAI,EAAI,EAAG,IACtBA,EAAK,KAAM,GAAI,EAAG,IAClBA,EAAK,KAAM,EAAG,EAAG,IACjBA,EAAK,KAAM,EAAG,EAAI,EAAG,IACrBA,EAAK,KAAM,EAAG,EAAI,EAAG,IACrBA,EAAK,KAAM,EAAG,EAAI,EAAG,IACrBA,EAAK,KAAM,GAAI,EAAG,OAGP2G,GAAa,CAAC,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,GAAI,IAEjFC,GAAM5F,EAAUuF,EAAUC,EAAUE,GAAYD,GAAaE,ICjuB1E,SAASE,KACP,MAAO,CACLjD,GAAIA,EAAG,IAAM,IACbM,GAAIA,EAAG,IAAM,IACbO,GAAIA,EAAG,IAAM,IACbsB,IAAKA,EAAI,IAAM,IACfO,IAAKA,EAAI,IAAM,IACfM,IAAKA,GAAI,IAAM,KAInB,SAASE,GAAQ/E,GACf,IAAMG,EAAc7J,EAAiBI,KAAKH,QAEpCyO,EAAStO,KAAKH,SAAWG,KAAKG,GAAK,EACnCuJ,EAAW,IAAI,OAAK1J,KAAKI,IAAIkO,GAAS,EAAGtO,KAAKE,IAAIoO,IAAS3M,MAAM,GACpED,KAAK,IAAI,OAAK,EAAG,EAAG,IAEjB6M,EAAU3O,EAAiBI,KAAKH,QAChC8J,EAAkB4E,EAAQ1K,MAAM,OAAKmG,OAAOrI,MAAM,KAExD,MAAO,CACL2H,WACAG,cACAC,WACAC,mBAIJ,SAAS6E,GAAU/G,GACjB,IAAMgH,EAAQ,IAAI,OACZC,EAAS,IAAI,QAAoBjH,EAAOG,MAAQ,IAAKH,EAAOG,MAAQ,IAAKH,EAAOI,OAAS,KAAMJ,EAAOI,OAAS,KACrH6G,EAAOpF,SAASjH,IAAI,EAAG,IAAK,GAC5BqM,EAAOC,OAAO,EAAG,EAAG,GAEpB,IAAMC,EAAW,IAAI,OAAc,CACjCnH,SACAoH,OAAO,EACPC,WAAW,IAEbF,EAASG,UAAUC,SAAU,EAC7BJ,EAASG,UAAUE,KAAO,OAE1B,IAAMC,EAAe,IAAI,OAAa,SAAU,IAChDT,EAAMtH,IAAI+H,GAEV,IAAMC,EAAenP,KAAKC,KAAKyO,EAAOU,MAAQV,EAAOU,MAAQV,EAAOW,IAAMX,EAAOW,KAE3EC,EAAoB,IAAI,OAAiB,SAAU,IACzDA,EAAkBhG,SAASjH,IAAI,EAAG,GAAI,GACtCiN,EAAkBC,OAAOC,QAAQ5H,MAAQ,EAAIH,EAAOG,MACpD0H,EAAkBC,OAAOC,QAAQ3H,OAAS,EAAIJ,EAAOI,OACrDyH,EAAkBC,OAAOb,OAAOe,MAAQ,EAAIN,EAC5CG,EAAkBC,OAAOb,OAAOgB,IAAM,EAAIP,EAC1CG,EAAkBC,OAAOb,OAAOW,IAAMF,EACtCG,EAAkBC,OAAOb,OAAOiB,QAAUR,EAC1CG,EAAkBC,OAAOb,OAAOkB,MAAQT,EACxCG,EAAkBC,OAAOb,OAAOU,MAAQD,EACxCG,EAAkBtG,YAAa,EAC/ByF,EAAMtH,IAAImI,GAEV,IAAMO,EAAgB,IAAI,OAAc,EAAInB,EAAOU,MAAO,EAAIV,EAAOW,KAC/DS,EAAgB,IAAI,OAAe,CAAEC,QAAS,KAC9CC,EAAQ,IAAI,OAAKH,EAAeC,GAMtC,OALAE,EAAMC,SAASjQ,KAAKG,GAAK,GACzB6P,EAAMhH,YAAa,EACnBgH,EAAME,eAAgB,EACtBzB,EAAMtH,IAAI6I,GAEH,CAAEvB,QAAOC,SAAQE,YAG1B,SAASuB,GAAUC,GACjB,IAAMC,EAAQ,IAAI,OAAM,CACtBC,QAAS,IAAI,OAAK,GAAI,GAAI,KAGtBC,EAAe,IAAI,OACnBC,EAAgB,IAAI,OAEpBC,EAAQ,IAAI,OAAK,CACrBxB,KAAM,OAAKyB,OACXjI,MAAO,IAAI,OACXa,SAAU,IAAI,OAAK,EAAG,EAAG,GACzBE,YAAY,IAAI,QAAOhG,eAAe,OAAK4G,OAAQ,OAAKJ,QACxDnB,SAAU2H,IAGNG,EAAQ,CACZ,IAAI,OAAK,CACP1B,KAAM,OAAKyB,OACXjI,MAAO,IAAI,OACXa,SAAU,IAAI,QAAM8G,EAAS7N,EAAI,EAAG,EAAG,GACvCiH,YAAY,IAAI,QAAOhG,eAAe,OAAK4G,OAAQ,OAAK4C,QACxDnE,SAAU0H,IAEZ,IAAI,OAAK,CACPtB,KAAM,OAAKyB,OACXjI,MAAO,IAAI,OACXa,SAAU,IAAI,QAAM8G,EAAS7N,EAAI,EAAG,EAAG,GACvCiH,YAAY,IAAI,QAAOhG,eAAe,OAAK4G,OAAQ,OAAK4C,OAAOC,UAC/DpE,SAAU0H,IAEZ,IAAI,OAAK,CACPtB,KAAM,OAAKyB,OACXjI,MAAO,IAAI,OACXa,SAAU,IAAI,OAAK,EAAG,GAAI8G,EAAS5N,EAAI,GACvCgH,YAAY,IAAI,QAAOhG,eAAe,OAAK4G,OAAQ,OAAKA,QACxDvB,SAAU0H,IAEZ,IAAI,OAAK,CACPtB,KAAM,OAAKyB,OACXjI,MAAO,IAAI,OACXa,SAAU,IAAI,OAAK,EAAG,GAAI8G,EAAS5N,EAAI,GACvCgH,YAAY,IAAI,QAAOhG,eAAe,OAAK4G,OAAQ,OAAKA,OAAO6C,UAC/DpE,SAAU0H,KAIdF,EAAMO,QAAQH,GACd,cAAmBE,EAAnB,gBAAK,IAAMxH,EAAI,KAAWkH,EAAMO,QAAQzH,GAMxC,OAJAkH,EAAMQ,mBAAmB,IAAI,OAAgBR,EAAMS,gBAAiBP,EAAc,CAAEQ,SAAU,KAC9FV,EAAMQ,mBAAmB,IAAI,OAAgBR,EAAMS,gBAAiBN,EAAe,CAAEO,SAAU,OAC/FV,EAAMQ,mBAAmB,IAAI,OAAgBR,EAAMS,gBAAiBT,EAAMS,gBAAiB,CAAEC,SAAU,KAEhG,CAAEV,QAAOM,QAAOF,SAGnB,SAAUO,GAASvJ,EAA2BlI,GAClD,GAA2B,YAAvBmI,SAASuJ,WAA0B,OAAO/R,OAAOgS,iBAAiB,QAAQ,kBAAMF,GAASvJ,EAAQlI,MAErG,IAAM4R,EAAO/C,KAEPgD,EAAM3J,EAAO4J,wBACnB5J,EAAOG,MAAQwJ,EAAIxJ,MACnBH,EAAOI,OAASuJ,EAAIvJ,OAEpB,MAAoC2G,GAAU/G,GAAtCgH,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OAAQE,EAAvB,EAAuBA,SACjBwB,EAAW,IAAI,OAAuB,EAAf1B,EAAOU,MAAwB,EAAbV,EAAOW,KACtD,EAAgCc,GAAUC,GAAlCC,EAAR,EAAQA,MAAOI,EAAf,EAAeA,MAAOE,EAAtB,EAAsBA,MAIhBW,EAAuB,GAEvBC,EAAUC,QAAQC,QAAQN,GAAMhP,KAAI,SAAAuP,GAAC,OAAIP,EAAKO,MAC9CC,EAAUJ,EAAQpP,KAAI,SAACyG,EAAK9M,GAChC,IAAMwN,EAAW,IAAI,QAClB8G,EAAS7N,EAAI,EAAI,GAClB,GAAMzG,EAAI,GAAOyV,EAAQvV,OAAS,IAG9B8C,EAAS,EAAI6J,aAAaC,GAChC9J,EAAOwK,SAASjH,IAAIiH,EAAS/G,EAAG,GAAI+G,EAAS9G,GAC7C1D,EAAO6C,MAAMU,IAAI,GAAK,GAAK,IAE3B,IAVqC,EAU/B4F,GAAW,IAAI,QAAa2J,mBAChC,IAAI,OAAQhJ,EAAIJ,MAAMlG,MAAM,GAAG1B,OAAO2B,EAAGqG,EAAIJ,MAAMlG,MAAM,GAAG1B,OAAO4B,EAAGoG,EAAIJ,MAAMlG,MAAM,GAAG1B,OAAO6B,GAChG,IAAI,OAAQ,GAAI,EAAG,IAGfhB,EAAS,IAAI,OAfkB,iBAgBrBmH,EAAIJ,MAAMlG,MAAM,GAAGJ,UAhBE,IAgBrC,gCAAWxC,EAAX,QAA6C+B,EAAOC,KAAKhC,EAAEuD,MAAOxB,IAhB7B,8BAiBrCA,EAAOE,MAAM,EAAIiH,EAAIJ,MAAMlG,MAAM,GAAGJ,SAASlG,OAAQyF,GAErD,IAAMK,EAAI,IAAI,OACdA,EAAE+P,KAAKjJ,EAAIJ,MAAMlG,MAAM,GAAGJ,SAAS,GAAGe,OACtCnB,EAAEgQ,IAAIrQ,GACNK,EAAEiQ,YACFjQ,EAAEkQ,gBAAgB/J,GAElB,IAAMvE,EAAI,IAAI,OAcd,OAb8B,GAA1BkF,EAAIJ,MAAMlG,MAAMtG,OAClB0H,EAAEyG,iBAAiB,IAAI,OAAQ,EAAG,EAAG,GAAc,EAAVnK,KAAKG,GAAS,GAEtB,GAA1ByI,EAAIJ,MAAMlG,MAAMtG,QACvB0H,EAAEyG,iBAAiB,IAAI,OAAQ,EAAG,EAAG,GAAc,EAAVnK,KAAKG,GAAS,GAEzDuD,EAAEuO,UAAS,IAAI,QAAaL,mBAAmB9P,EAAG,IAAI,OAAQ,EAAG,EAAG,KACpE4B,EAAEuO,SAAShK,GACXvE,EAAEqO,YAEFjT,EAAO0K,WAAWqI,KAAKnO,GACvB+K,EAAMtH,IAAIrI,GAEH,CACL8J,MACA9J,SACAwK,WACAG,YAAa/F,EACbuE,SAAU,MAId,SAASiK,EAAQ3P,EAAWC,GAC1B,IADmC,EAC7B2P,EAAM,IAAI,QACb5P,EAAIkF,EAAOG,MAAQ,IAAOwI,EAAS7N,GACnCC,EAAIiF,EAAOI,OAAS,IAAOuI,EAAS5N,GAGjC0F,EAAS,IAAI,OANgB,iBAOdyJ,GAPc,IAOnC,2BAA8B,KAAnBS,EAAmB,QAI5B,GAHAlK,EAAO2J,KAAKM,GACZjK,EAAO4J,IAAIM,EAAO9I,UAEdpB,EAAOlM,SAAW,GACpB,OAAOoW,GAZwB,8BAgBnC,OAAO,KAGT,SAASjL,EAAIyB,EAAUU,GACrB,IAAMxL,EAAI,EAAIY,OAAOkK,GACrB0I,EAAQhV,KAAKwB,GACb2Q,EAAMtH,IAAIrJ,EAAEgB,QACZuR,EAAMO,QAAQ9S,EAAEqL,MAEhB,IAAME,EAAOgF,GAAQ/E,GACrB,EAAIF,SAAStL,EAAGuL,GAChB,EAAIO,OAAO9L,GAGb,IAAIuU,EAAyB,KAC7B,SAASC,EAAapL,GACpBmL,EAAUH,EAAQhL,EAAEqL,QAASrL,EAAEsL,SAGjC/K,EAAOyJ,iBAAiB,aAAcoB,GACtC7K,EAAOyJ,iBAAiB,aAAcoB,GACtC7K,EAAOyJ,iBAAiB,YAAaoB,GAErC7K,EAAOyJ,iBAAiB,SAAS,SAAAhK,GAC/B,IAAMuL,EAAOP,EAAQhL,EAAEqL,QAASrL,EAAEsL,SAClC,GAAY,MAARC,EAAJ,CAEA,IAAKC,EAAQ,wBACKpB,GADL,IACX,2BAAyB,KAAdxT,EAAc,QACvB2Q,EAAMkE,OAAO7U,EAAEgB,QACfuR,EAAMuC,WAAW9U,EAAEqL,OAHV,8BAMXmI,EAAQtV,OAAS,EACjBuD,EAAQlB,MAAQ,KAGlBqU,GAAS,EACTvL,EAAIsL,EAAK7J,IAAK,IAAI,OAAK6J,EAAK3T,OAAOwK,SAAS/G,EAAG,EAAGkQ,EAAK3T,OAAOwK,SAAS7G,QAGzE,IAAIiQ,GAAS,EACb,SAASG,IACPpL,EAAOqL,MAAMC,OAASV,EAAU,UAAY,UAE5C,IAHa,EAGPW,EAAO,IAAI,OAAQ,EAAG,GAAI,GAAGjB,YAHtB,iBAIQJ,GAJR,IAIb,2BAA8B,KAAnBS,EAAmB,QAC5B,GAAIA,GAAUC,GAAWD,EAAOnK,SAAW,IAAM,EAAG,CAC9CmK,GAAUC,EACZD,EAAOnK,UAAY,EACZmK,EAAOnK,SAAW,IAAMmK,EAAOnK,SAAW,EACjDmK,EAAOnK,SAAW,EACXmK,EAAOnK,SAAW,GACzBmK,EAAOnK,UAAY,EAEnBmK,EAAOnK,UAAY,EAErBmK,EAAOnK,UAAY,GAEnB,IAAMvE,GAAI,IAAI,QAAayG,iBAAiB6I,EAAMZ,EAAOnK,SAAWjI,KAAKG,GAAK,IAC9EuD,EAAEuO,SAASG,EAAO3I,aAClB/F,EAAEqO,YACFK,EAAOtT,OAAO0K,WAAWqI,KAAKnO,QAE9B0O,EAAOtT,OAAO0K,WAAWqI,KAAKO,EAAO3I,aAGvC2I,EAAOtT,OAAOmU,gBAzBH,8BA4Bb,GAAIP,EAAQ,CACVrC,EAAM6C,KAAK,EAAI,IADL,uBAGM5B,GAHN,IAGV,2BAAyB,KAAdxT,EAAc,QACnBA,EAAEqL,KAAK8F,MAAQ,OAAKyB,QACtB5S,EAAEqL,KAAKO,SAASyJ,UAChBrV,EAAEqL,KAAKQ,gBAAgBwJ,YAEvB,EAAIvJ,OAAO9L,GACP,EAAI+L,QAAQ/L,KACdA,EAAEqL,KAAK8F,KAAO,OAAKyB,UAVf,8BAeV,IAfU,EAeJ0C,EAAuB,GACvBC,EAAQhD,EAAMiD,SAASnR,KAAI,SAAAzE,GAAC,MAAI,CAACA,EAAE6V,GAAI7V,EAAE8V,OACzCC,EAAWzT,KAAKiB,IAAI,IAAK,GAAKoP,EAAMqD,MAjBhC,iBAmBWL,GAnBX,qDAmBExR,EAnBF,KAmBKC,EAnBL,KAoBR,GAAID,GAAK4O,GAAS3O,GAAK2O,EAAO,iBAC9B,GAAI2C,EAAKjN,MAAK,SAAAzI,GAAC,OAAImE,GAAKnE,EAAE,IAAMoE,GAAKpE,EAAE,IAAMoE,GAAKpE,EAAE,IAAMmE,GAAKnE,EAAE,MAAK,iBAGtE,GAFA0V,EAAK9W,KAAK,CAACuF,EAAGC,IAEV6O,EAAM7J,SAASjF,IAAM8O,EAAM7J,SAAShF,GAAI,CAC1C,MAAoB6O,EAAM7J,SAASjF,GAAK,CAACC,EAAGD,GAAK,CAACA,EAAGC,GAArD,sBAAO8G,EAAP,KAAY+K,EAAZ,KACM/S,EAAS+S,EAAKnK,WAAW3F,MAAM,OAAKuG,QAC1CxB,EAAIgL,WAAWhT,EAAOe,MAAM8R,QACvB,CACL,IAAMI,EAAMhS,EAAEyH,SAASxI,KAAKgB,EAAEwH,UAAUlF,OACxCvC,EAAE+R,WAAWC,EAAIlS,MAAM8R,EAAW,IAClC3R,EAAE8R,WAAWC,EAAIlS,OAAO8R,EAAW,MAZvC,2BAA4B,IAnBlB,8BAmCVf,EAASpB,EAAQnL,MAAK,SAAArI,GAAC,OAAIA,EAAEqL,KAAK8F,MAAQ,OAAKyB,UAE1CgC,IACHnT,EAAQlB,MAAQiT,EAAQnP,KAAI,SAAArE,GAAC,OAAIA,EAAE8K,IAAIrJ,QAAQzB,EAAE8K,IAAIJ,MAAMlG,MAAMe,QAAQ,EAAIwG,QAAQ/L,SAOzF8Q,EAASiE,OAAOpE,EAAOC,GACvBoF,sBAAsBjB,GAGxBiB,sBAAsBjB,GFlVT,QACbjV,KAAM,WACNmW,MAFa,SAEPC,GACJ,IAAMvM,EAAS,eAAW,MACpBlI,EAAU,eAAW,MAM3B,OAJA,eAAMkI,GAAQ,SAAAA,GACZuJ,GAASvJ,EAAQlI,MAGZ,CACLkI,SACAlI,a,8CGpBN,MAAM0U,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAE1E,UCNTC,GAAM,eAAU,IACtBA,GAAIC,MAAM,S","file":"js/index.0174af51.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./main.vue?vue&type=style&index=1&id=7beee240&lang=scss\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./main.vue?vue&type=style&index=0&id=7beee240&lang=scss&scoped=true\"","<template>\n  <canvas ref=\"canvas\" />\n\n  <span class=\"results\" v-if=\"results\">\n    {{ results.join(\" + \") }}\n    <template v-if=\"results.length > 1\">\n      = {{ results.reduce((s, v) => s + v, 0) }}\n    </template>\n  </span>\n</template>\n\n<script>\nimport { shallowRef, watch } from 'vue';\n\nimport { initDice } from './diceroll';\n\nexport default {\n  name: 'dnd-dice',\n  setup(props) {\n    const canvas = shallowRef(null);\n    const results = shallowRef(null);\n\n    watch(canvas, canvas => {\n      initDice(canvas, results);\n    });\n\n    return {\n      canvas,\n      results,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\ncanvas {\n  width: 100vw;\n  height: 100vh;\n}\n\n.results {\n  position: absolute;\n  top: 0;\n  left: 0;\n  padding: 1em;\n\n  font-size: 2em;\n  font-weight: bold;\n  font-family: Roboto;\n  text-shadow: 0 0 3px currentColor, 0 0 20px white, 0 0 20px white,\n    0 0 20px white, 0 0 20px white, 0 0 20px white, 0 0 20px white,\n    0 0 20px white, 0 0 20px white, 0 0 20px white, 0 0 20px white,\n    0 0 20px white, 0 0 20px white;\n}\n</style>\n\n<style lang=\"scss\">\nbody {\n  overflow: hidden;\n}\n</style>\n","import { assert } from '@mfro/ts-common/assert';\nimport { Vec3, Quaternion as Quat, ConvexPolyhedron, Shape, Body } from 'cannon-es';\nimport { BufferGeometry, Object3D, Vector2, BufferAttribute, SphereGeometry, Matrix4, Texture, CanvasTexture, MeshStandardMaterial, Matrix3, Vector3, Group, Mesh } from 'three';\n\ntype Random = () => number;\n\nexport interface Vertex {\n  point: Vec3;\n  edges: Edge[];\n  faces: Face[];\n}\n\nexport interface Edge {\n  vertices: [Vertex, Vertex];\n  faces: [Face, Face];\n}\n\nexport namespace Edge {\n  export function otherVertex(e: Edge, v: Vertex) {\n    return e.vertices[1] == v\n      ? e.vertices[0]\n      : e.vertices[1];\n  }\n}\n\nexport interface Face {\n  vertices: Vertex[];\n  edges: Edge[];\n  normal: Vec3;\n}\n\nexport interface Model {\n  vertices: Vertex[];\n  edges: Edge[];\n  faces: Face[];\n}\n\nexport interface DieCtor {\n  (rounding: number, edgeDetail: number): Die;\n}\n\nexport interface Die {\n  model: Model;\n  shape: Shape;\n  texture: Texture;\n  geometry: BufferGeometry[];\n  results: number[];\n}\n\nexport namespace Die {\n  export function createObject(die: Die) {\n    const material = new MeshStandardMaterial({\n      map: die.texture,\n    });\n\n    const object = new Group();\n    object.add(...die.geometry.map(g => {\n      const mesh = new Mesh(g, material);\n      mesh.castShadow = true;\n      return mesh;\n    }));\n\n    return object;\n  }\n\n  export function createBody(die: Die) {\n    return new Body({\n      mass: 1,\n      shape: die.shape,\n    });\n  }\n\n  export function create(die: Die): DieObject {\n    const body = createBody(die);\n    const object = createObject(die);\n\n    return { die, body, object };\n  }\n\n  export function initRoll(o: DieObject, roll: DieRoll) {\n    o.body.position = roll.position.clone();\n    o.body.quaternion = roll.orientation.clone();\n    o.body.velocity = roll.velocity.clone();\n    o.body.angularVelocity = roll.angularVelocity.clone();\n  }\n\n  export function update(o: DieObject) {\n    o.object.position.set(\n      o.body.position.x,\n      o.body.position.y,\n      o.body.position.z,\n    );\n\n    o.object.quaternion.set(\n      o.body.quaternion.x,\n      o.body.quaternion.y,\n      o.body.quaternion.z,\n      o.body.quaternion.w,\n    );\n  }\n\n  export function resolve(o: DieObject) {\n    let spin = o.body.angularVelocity.lengthSquared();\n    let velocity = o.body.velocity.lengthSquared();\n    let face = o.die.model.faces.find(f => o.body.quaternion.vmult(f.normal).dot(Vec3.UNIT_Y) < -0.99);\n\n    if (spin < 0.001 && velocity < 0.001 && face !== undefined) {\n      return face;\n    } else {\n      return null;\n    }\n  }\n}\n\nexport interface DieRoll {\n  position: Vec3;\n  orientation: Quat;\n  velocity: Vec3;\n  angularVelocity: Vec3;\n}\n\nexport interface DieObject {\n  die: Die;\n  object: Object3D;\n  body: Body;\n}\n\nexport function randomQuaternion(random: Random) {\n  const u = random();\n  const v = random();\n  const w = random();\n\n  return new Quat(\n    Math.sqrt(1 - u) * Math.sin(2 * Math.PI * v),\n    Math.sqrt(1 - u) * Math.cos(2 * Math.PI * v),\n    Math.sqrt(u) * Math.sin(2 * Math.PI * w),\n    Math.sqrt(u) * Math.cos(2 * Math.PI * w),\n  );\n}\n\nfunction defineDieGeometry(m: Model): (rounding: number, edgeDetail: number) => BufferGeometry[] {\n  return (rounding, edgeDetail) => {\n    function angleCCW(p1: Vec3, p2: Vec3, origin: Vec3, normal: Vec3) {\n      const v1 = p1.vsub(origin);\n      const v2 = p2.vsub(origin);\n      const cosine = Math.min(1, Math.max(-1, v1.dot(v2) / v1.length() / v2.length()));\n      const theta = Math.acos(cosine);\n      const cross = v1.cross(v2).dot(normal);\n\n      if (cross >= 0) {\n        return theta;\n      } else {\n        return Math.PI * 2 - theta;\n      }\n    }\n\n    function sortCCW(points: Vec3[], normal: Vec3) {\n      const center = new Vec3();\n      for (const v of points) center.vadd(v, center);\n      center.scale(1 / points.length, center);\n\n      const ref = points[0];\n      return points.slice().sort((a, b) => {\n        return angleCCW(ref, a, center, normal) - angleCCW(ref, b, center, normal);\n      });\n    }\n\n    const allFaces: [Vec3, Vector2][][] = [];\n    const allNormals: Vec3[] = [];\n\n    const vertexCenters = m.vertices.map(v => {\n      const A = new Matrix3().set(\n        v.faces[0].normal.x, v.faces[0].normal.y, v.faces[0].normal.z,\n        v.faces[1].normal.x, v.faces[1].normal.y, v.faces[1].normal.z,\n        v.faces[2].normal.x, v.faces[2].normal.y, v.faces[2].normal.z,\n      );\n\n      A.invert();\n\n      const B = new Vector3(-rounding, -rounding, -rounding);\n      const x = B.applyMatrix3(A);\n      const y = new Vec3(x.x, x.y, x.z);\n\n      assert(v.faces.every(f => Math.abs(f.normal.dot(y) + rounding) < 1e-6), 'rounding');\n\n      return v.point.vadd(y);\n    });\n\n    for (const edge of m.edges) {\n      const o1 = vertexCenters[m.vertices.indexOf(edge.vertices[0])];\n      const o2 = vertexCenters[m.vertices.indexOf(edge.vertices[1])];\n\n      const q1 = new Quat().setFromVectors(edge.faces[0].normal, edge.faces[0].normal);\n      const q2 = new Quat().setFromVectors(edge.faces[0].normal, edge.faces[1].normal);\n      const q = new Quat();\n\n      for (let i = 0; i < edgeDetail; ++i) {\n        q1.slerp(q2, i / edgeDetail, q);\n        const v11 = o1.vadd(q.vmult(edge.faces[0].normal.scale(rounding)));\n        const v21 = o2.vadd(q.vmult(edge.faces[0].normal.scale(rounding)));\n\n        q1.slerp(q2, (i + 1) / edgeDetail, q);\n        const v12 = o1.vadd(q.vmult(edge.faces[0].normal.scale(rounding)));\n        const v22 = o2.vadd(q.vmult(edge.faces[0].normal.scale(rounding)));\n\n        q1.slerp(q2, (i + 0.5) / edgeDetail, q);\n        const normal = q.vmult(edge.faces[0].normal);\n\n        allFaces.push(sortCCW([v11, v21, v22, v12], normal).map(v => [v, new Vector2(0.5, 0.5)]));\n        allNormals.push(normal);\n      }\n    }\n\n    for (let i = 0; i < m.faces.length; ++i) {\n      const inset = m.faces[i].vertices.map(v => vertexCenters[m.vertices.indexOf(v)].vadd(m.faces[i].normal.scale(rounding)));\n      const ccw = sortCCW(inset, m.faces[i].normal);\n\n      const center = new Vec3();\n      for (const v of ccw) center.vadd(v, center);\n      center.scale(1 / ccw.length, center);\n\n      const u0 = ccw[1].vsub(center).unit();\n      const u1 = u0.cross(m.faces[i].normal);\n\n      const offsets = ccw.map(c => {\n        const diff = c.vsub(center);\n        const x = diff.dot(u1);\n        const y = diff.dot(u0);\n\n        return [c, new Vector2(x, y)] as [Vec3, Vector2];\n      });\n\n      const min = offsets.reduce((min, v) => new Vector2(Math.min(min.x, v[1].x), Math.min(min.y, v[1].y)), new Vector2);\n      const max = offsets.reduce((max, v) => new Vector2(Math.max(max.x, v[1].x), Math.max(max.y, v[1].y)), new Vector2);\n\n      const range = Math.max(-min.x, -min.y, max.x, max.y);\n\n      for (const o of offsets) {\n        o[1].multiplyScalar(1 / range);\n        o[1].x = (o[1].x / 2 + 0.5 + i) / m.faces.length;\n        o[1].y = o[1].y / 2 + 0.5;\n      }\n\n      allFaces.push(offsets);\n      allNormals.push(m.faces[i].normal);\n    }\n\n    const threeTextures: number[] = [];\n    const threeVertices: number[] = [];\n    const threeNormals: number[] = [];\n    const threeFaces: number[] = [];\n\n    for (let i = 0; i < allFaces.length; ++i) {\n      const i0 = threeVertices.length / 3;\n\n      for (const [v, uv] of allFaces[i]) {\n        threeVertices.push(v.x, v.y, v.z);\n        threeTextures.push(uv.x, uv.y);\n        threeNormals.push(allNormals[i].x, allNormals[i].y, allNormals[i].z);\n      }\n\n      threeFaces.push(i0, i0 + 1, i0 + 2);\n      if (allFaces[i].length >= 4) threeFaces.push(i0 + 2, i0 + 3, i0 + 0);\n      if (allFaces[i].length >= 5) threeFaces.push(i0 + 3, i0 + 4, i0 + 0);\n    }\n\n    const geometries: BufferGeometry[] = [];\n\n    const geometry = new BufferGeometry();\n    geometry.setAttribute('position', new BufferAttribute(new Float32Array(threeVertices), 3));\n    geometry.setAttribute('normal', new BufferAttribute(new Float32Array(threeNormals), 3));\n    geometry.setAttribute('uv', new BufferAttribute(new Float32Array(threeTextures), 2));\n    geometry.setIndex(threeFaces);\n\n    geometries.push(geometry);\n\n    for (const v of vertexCenters) {\n      const sphere = new SphereGeometry(rounding);\n      sphere.translate(v.x, v.y, v.z);\n      const matrix = new Matrix4();\n      matrix.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n      sphere.attributes.uv.applyMatrix4(matrix);\n      geometries.push(sphere);\n    }\n\n    return geometries;\n  };\n}\n\nfunction defineDieShape(m: Model): Shape {\n  return new ConvexPolyhedron({\n    vertices: m.vertices.map(v => v.point),\n    normals: m.faces.map(f => f.normal),\n    faces: m.faces.map(f => f.vertices.map(v => m.vertices.indexOf(v))),\n  });\n}\n\nfunction defineDieModel(numFaces: number, fn: (scale: number) => [Vec3[], ...number[]]): Model {\n  const [points, ...edgeLengths] = fn(1);\n\n  const vertices: Vertex[] = [];\n  const edges: Edge[] = [];\n  const faces: Face[] = [];\n\n  for (let i1 = 0; i1 < points.length; ++i1) {\n    const v1: Vertex = {\n      point: points[i1],\n      edges: [],\n      faces: [],\n    };\n\n    vertices.push(v1);\n\n    for (let i2 = 0; i2 < i1; ++i2) {\n      const v2 = vertices[i2];\n\n      const distance = v1.point.vsub(v2.point);\n      if (edgeLengths.some(l => Math.abs(l - distance.length()) < 1e-6)) {\n        const edge: Edge = {\n          vertices: [v1, v2],\n          faces: [] as any\n        };\n\n        v1.edges.push(edge);\n        v2.edges.push(edge);\n        edges.push(edge);\n      }\n    }\n  }\n\n  function findFaces(target: Vertex, origin: Vertex, maxDepth: number) {\n    const cycles = [];\n    const queue = [\n      [origin, []] as [Vertex, Edge[]],\n    ];\n\n    while (queue.length > 0) {\n      const [node, path] = queue.pop()!;\n\n      for (const edge of node.edges) {\n        const next = Edge.otherVertex(edge, node);\n        if (path.includes(edge)) continue;\n\n        if (next == target) {\n          cycles.push([...path, edge]);\n        } else if (path.length + 1 < maxDepth) {\n          queue.push([next, [...path, edge]]);\n        }\n      }\n    }\n\n    return cycles;\n  }\n\n  const edgesPerFace = 2 * edges.length / numFaces;\n\n  const allFaces = [];\n  for (const v of vertices) {\n    allFaces.push(...findFaces(v, v, edgesPerFace));\n  }\n\n  for (const faceEdges of allFaces) {\n    const set = new Set<Vertex>();\n    for (const e of faceEdges) for (const p of e.vertices) set.add(p);\n    const faceVertices = [...set];\n\n    const normal = (faceVertices[1].point.vsub(faceVertices[0].point)).cross(faceVertices[2].point.vsub(faceVertices[0].point)).unit();\n    if (faces.find(f => f.normal.almostEquals(normal))) continue;\n\n    const center = new Vec3();\n    for (const v of faceVertices) center.vadd(v.point, center);\n    center.scale(1 / faceVertices.length, center);\n\n    if (center.dot(normal) < 0) continue;\n\n    const face = {\n      normal,\n      edges: faceEdges,\n      vertices: faceVertices,\n    };\n\n    for (const v of faceVertices) v.faces.push(face);\n    for (const e of faceEdges) e.faces.push(face);\n    faces.push(face);\n  }\n\n  assert(edges.every(e => e.faces.length == 2), 'valid die');\n  return { vertices, edges, faces };\n}\n\nfunction defineDieTexture(m: Model, fn: (ctx: CanvasRenderingContext2D, face: (text: string, face: number, rotation: number, offset: number) => void) => void): () => Texture {\n  return () => {\n    const canvas = document.createElement('canvas');\n    canvas.width = m.faces.length * 512;\n    canvas.height = 512;\n\n    const context = canvas.getContext('2d');\n    assert(context != null, 'context');\n\n    fn(context, (text, face, rotation, offset) => {\n      context.translate(256 + 512 * face, 256);\n      context.rotate(rotation * Math.PI);\n      context.translate(0, offset);\n      context.fillText(text, 0, 0);\n      context.resetTransform();\n    });\n\n    const texture = new CanvasTexture(canvas);\n    return texture;\n  };\n}\n\nfunction defineDie(model: Model, shape: Shape, texture: () => Texture, geometry: (rounding: number, edgeDetail: number) => BufferGeometry[], results: number[]) {\n  return (rounding: number, edgeDetail: number): Die => {\n    return { model, shape, texture: texture(), geometry: geometry(rounding, edgeDetail), results };\n  };\n}\n\nexport const d4Model = defineDieModel(4, scale => {\n  const edge = scale * 20 / 16;\n\n  const q2 = new Quat().setFromAxisAngle(Vec3.UNIT_Z, -Math.acos(-1 / 3));\n  const q3 = new Quat().setFromAxisAngle(Vec3.UNIT_Y, Math.PI * 2 / 3).mult(q2);\n  const q4 = new Quat().setFromAxisAngle(Vec3.UNIT_Y, -Math.PI * 2 / 3).mult(q2);\n\n  const leg = Vec3.UNIT_Y.scale(edge * Math.sqrt(6) / 4);\n\n  const points = [\n    leg,\n    q2.vmult(leg),\n    q3.vmult(leg),\n    q4.vmult(leg),\n  ];\n\n  return [points, edge];\n});\n\nexport const d4Shape = defineDieShape(d4Model);\n\nexport const d4Texture = defineDieTexture(d4Model, (ctx, face) => {\n  ctx.fillStyle = '#333';\n  ctx.fillRect(0, 0, 4 * 512, 512);\n\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.font = 'bold 130px Roboto';\n  ctx.fillStyle = 'red';\n\n  face('1', 0, 0, -125);\n  face('2', 0, 2 / 3, -125);\n  face('3', 0, 4 / 3, -125);\n\n  face('1', 1, 0, -125);\n  face('4', 1, 4 / 3, -125);\n  face('3', 1, 2 / 3, -125);\n\n  face('1', 2, 0, -125);\n  face('4', 2, 2 / 3, -125);\n  face('2', 2, 4 / 3, -125);\n\n  face('4', 3, 0, -125);\n  face('2', 3, 4 / 3, -125);\n  face('3', 3, 2 / 3, -125);\n});\n\nexport const d4Geometry = defineDieGeometry(d4Model);\n\nexport const d4Results = [2, 3, 4, 1];\n\nexport const d4 = defineDie(d4Model, d4Shape, d4Texture, d4Geometry, d4Results);\n\nexport const d6Model = defineDieModel(6, scale => {\n  const edge = scale;\n\n  const points = [];\n  for (let i = 0; i < 8; ++i) {\n    points.push(new Vec3(\n      (i & 0b001) ? edge / 2 : -edge / 2,\n      (i & 0b010) ? edge / 2 : -edge / 2,\n      (i & 0b100) ? edge / 2 : -edge / 2,\n    ));\n  }\n\n  return [points, edge];\n});\n\nexport const d6Shape = defineDieShape(d6Model);\n\nexport const d6Texture = defineDieTexture(d6Model, (ctx, face) => {\n  ctx.fillStyle = '#333';\n  ctx.fillRect(0, 0, 6 * 512, 512);\n\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.font = 'bold 240px Roboto';\n  ctx.fillStyle = 'red';\n\n  face('1', 0, 3 / 4, 20);\n  face('2', 2, 1 / 4, 20);\n  face('3', 1, 7 / 4, 20);\n\n  face('4', 3, 1 / 4, 20);\n  face('5', 5, 7 / 4, 20);\n  face('6', 4, 1 / 4, 20);\n});\n\nexport const d6Geometry = defineDieGeometry(d6Model);\n\nexport const d6Results = [6, 4, 5, 3, 1, 2];\n\nexport const d6 = defineDie(d6Model, d6Shape, d6Texture, d6Geometry, d6Results);\n\nexport const d8Model = defineDieModel(8, scale => {\n  const edge = scale * 18.5 / 16;\n\n  const x = edge / Math.SQRT2;\n  const points = [\n    new Vec3(+x, 0, 0),\n    new Vec3(-x, 0, 0),\n    new Vec3(0, +x, 0),\n    new Vec3(0, -x, 0),\n    new Vec3(0, 0, +x),\n    new Vec3(0, 0, -x),\n  ];\n\n  return [points, edge];\n});\n\nexport const d8Shape = defineDieShape(d8Model);\n\nexport const d8Texture = defineDieTexture(d8Model, (ctx, face) => {\n  ctx.fillStyle = '#333';\n  ctx.fillRect(0, 0, 8 * 512, 512);\n\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.font = 'bold 200px Roboto';\n  ctx.fillStyle = 'red';\n\n  face('1', 0, 4 / 3, 0);\n  face('2', 1, 4 / 3, 0);\n  face('3', 2, 2 / 3, 0);\n  face('4', 3, 2 / 3, 0);\n\n  face('5', 5, 4 / 3, 0);\n  face('6', 4, 4 / 3, 0);\n  face('7', 6, 2 / 3, 0);\n  face('8', 7, 2 / 3, 0);\n});\n\nexport const d8Geometry = defineDieGeometry(d8Model);\n\nexport const d8Results = [8, 7, 6, 5, 3, 4, 2, 1];\n\nexport const d8 = defineDie(d8Model, d8Shape, d8Texture, d8Geometry, d8Results);\n\nexport const d10Model = defineDieModel(10, scale => {\n  const edge1 = scale;\n\n  const theta = Math.PI * 2 / 5;\n  const a1 = Math.PI * .27;\n\n  const r1 = Math.sin(a1) * edge1;\n  const h1 = Math.cos(a1) * edge1;\n\n  const r2 = Math.cos(theta / 2) * r1;\n  const a2 = Math.atan(r2 / h1);\n  const a3 = Math.PI - a1 - a2;\n\n  const lawOfSines = edge1 / Math.sin(a2);\n  const height = lawOfSines * Math.sin(a3);\n\n  const legLength = Math.sqrt(height * height / 4 + edge1 * edge1 - height * edge1 * Math.cos(a1));\n  const legAngle1 = Math.asin(edge1 * Math.sin(a1) / legLength);\n  const legAngle2 = Math.PI / 2 - legAngle1;\n\n  const q1 = new Quat().setFromAxisAngle(Vec3.UNIT_Y, theta);\n  const q2 = new Quat().setFromAxisAngle(Vec3.UNIT_Z, legAngle2);\n\n  const tall = Vec3.UNIT_Y.scale(height / 2);\n  const leg = Vec3.UNIT_X.scale(legLength);\n\n  const points = [\n    tall,\n    q2.vmult(leg),\n    q1.vmult(q2.vmult(leg)),\n    q1.vmult(q1.vmult(q2.vmult(leg))),\n    q1.vmult(q1.vmult(q1.vmult(q2.vmult(leg)))),\n    q1.vmult(q1.vmult(q1.vmult(q1.vmult(q2.vmult(leg))))),\n    tall.negate(),\n    q2.vmult(leg.negate()),\n    q1.vmult(q2.vmult(leg.negate())),\n    q1.vmult(q1.vmult(q2.vmult(leg.negate()))),\n    q1.vmult(q1.vmult(q1.vmult(q2.vmult(leg.negate())))),\n    q1.vmult(q1.vmult(q1.vmult(q1.vmult(q2.vmult(leg.negate()))))),\n  ];\n\n  return [points, points[1].vsub(points[0]).length(), points[7].vsub(points[3]).length()];\n});\n\nexport const d10Shape = defineDieShape(d10Model);\n\nexport const d10Texture = defineDieTexture(d10Model, (ctx, face) => {\n  ctx.fillStyle = '#333';\n  ctx.fillRect(0, 0, 10 * 512, 512);\n\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.font = 'bold 160px Roboto';\n  ctx.fillStyle = 'red';\n\n  face('1', 0, 0, 0);\n  face('2', 8, 1, 0);\n  face('3', 4, 0, 0);\n  face('4', 5, 1, 0);\n  face('5', 2, 0, 0);\n\n  face('6', 9, 1, 0);\n  face('7', 1, 0, 0);\n  face('8', 7, 1, 0);\n  face('9', 3, 0, 0);\n  face('10', 6, 1, 0);\n});\n\nexport const d10Geometry = defineDieGeometry(d10Model);\n\nexport const d10Results = [10, 4, 6, 2, 8, 7, 1, 3, 9, 5];\n\nexport const d10 = defineDie(d10Model, d10Shape, d10Texture, d10Geometry, d10Results);\n\nexport const d12Model = defineDieModel(12, scale => {\n  const edge = scale * 0.5;\n  const phi = (1 + Math.sqrt(5)) / 2;\n\n  const points = [\n    new Vec3(1, 1, 1),\n    new Vec3(-1, 1, 1),\n    new Vec3(1, -1, 1),\n    new Vec3(1, 1, -1),\n    new Vec3(-1, -1, 1),\n    new Vec3(1, -1, -1),\n    new Vec3(-1, 1, -1),\n    new Vec3(-1, -1, -1),\n\n    new Vec3(0, phi, 1 / phi),\n    new Vec3(0, -phi, 1 / phi),\n    new Vec3(0, phi, -1 / phi),\n    new Vec3(0, -phi, -1 / phi),\n\n    new Vec3(1 / phi, 0, phi),\n    new Vec3(1 / phi, 0, -phi),\n    new Vec3(-1 / phi, 0, phi),\n    new Vec3(-1 / phi, 0, -phi),\n\n    new Vec3(phi, 1 / phi, 0),\n    new Vec3(-phi, 1 / phi, 0),\n    new Vec3(phi, -1 / phi, 0),\n    new Vec3(-phi, -1 / phi, 0),\n  ];\n\n  for (const point of points) point.scale(edge * phi / 2, point);\n\n  return [points, edge];\n});\n\nexport const d12Shape = defineDieShape(d12Model);\n\nexport const d12Geometry = defineDieGeometry(d12Model);\n\nexport const d12Texture = defineDieTexture(d12Model, (ctx, face) => {\n  ctx.fillStyle = '#333';\n  ctx.fillRect(0, 0, 12 * 512, 512);\n\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.font = 'bold 240px Roboto';\n  ctx.fillStyle = 'red';\n\n  face('1', 0, 0, 20);\n  face('2', 2, 8 / 5, 20);\n  face('3', 1, 2 / 5, 20);\n  face('4', 7, 0, 20);\n  face('5', 6, 6 / 5, 20);\n  face('6', 5, 6 / 5, 20);\n\n  face('7', 3, 8 / 5, 20);\n  face('8', 8, 8 / 5, 20);\n  face('9', 4, 4 / 5, 20);\n  face('10', 10, 4 / 5, 20);\n  face('11', 9, 8 / 5, 20);\n  face('12', 11, 6 / 5, 20);\n});\n\nexport const d12Results = [12, 10, 11, 6, 4, 7, 8, 9, 5, 2, 3, 1];\n\nexport const d12 = defineDie(d12Model, d12Shape, d12Texture, d12Geometry, d12Results);\n\nexport const d20Model = defineDieModel(20, scale => {\n  const edge = scale * 0.8;\n  const phi = (1 + Math.sqrt(5)) / 2;\n\n  const points = [\n    new Vec3(0, 1, phi),\n    new Vec3(0, -1, phi),\n    new Vec3(0, 1, -phi),\n    new Vec3(0, -1, -phi),\n\n    new Vec3(1, phi, 0),\n    new Vec3(-1, phi, 0),\n    new Vec3(1, -phi, 0),\n    new Vec3(-1, -phi, 0),\n\n    new Vec3(phi, 0, 1),\n    new Vec3(phi, 0, -1),\n    new Vec3(-phi, 0, 1),\n    new Vec3(-phi, 0, -1),\n  ];\n\n  for (const point of points) point.scale(edge / 2, point);\n\n  return [points, 20, edge];\n});\n\nexport const d20Shape = defineDieShape(d20Model);\n\nexport const d20Geometry = defineDieGeometry(d20Model);\n\nexport const d20Texture = defineDieTexture(d20Model, (ctx, face) => {\n  ctx.fillStyle = '#333';\n  ctx.fillRect(0, 0, 20 * 512, 512);\n\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.font = 'bold 180px Roboto';\n  ctx.fillStyle = 'red';\n\n  face('1', 0, 0, 35);\n  face('2', 12, 0, 35);\n  face('3', 1, 2 / 3, 35);\n  face('4', 13, 2 / 3, 35);\n  face('5', 10, 0, 35);\n  face('6', 7, 0, 35);\n  face('7', 2, 4 / 3, 35);\n  face('8', 18, 2 / 3, 35);\n  face('9', 6, 2 / 3, 35);\n  face('10', 16, 0, 35);\n\n  face('11', 19, 0, 35);\n  face('12', 9, 4 / 3, 35);\n  face('13', 17, 4 / 3, 35);\n  face('14', 14, 2 / 3, 35);\n  face('15', 11, 0, 35);\n  face('16', 5, 0, 35);\n  face('17', 3, 4 / 3, 35);\n  face('18', 8, 2 / 3, 35);\n  face('19', 4, 2 / 3, 35);\n  face('20', 15, 0, 35);\n});\n\nexport const d20Results = [20, 18, 14, 4, 2, 5, 12, 15, 3, 9, 16, 6, 19, 17, 7, 1, 11, 8, 13, 10];\n\nexport const d20 = defineDie(d20Model, d20Shape, d20Texture, d20Geometry, d20Results);\n\n","import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { Body, ContactMaterial, Material, Plane, Vec3, World, Quaternion as Quat } from 'cannon-es';\nimport { AmbientLight, DirectionalLight, Mesh, Object3D, OrthographicCamera, PCFSoftShadowMap, PlaneGeometry, Quaternion, Scene, ShadowMaterial, Vector2, Vector3, WebGLRenderer } from 'three';\n\nimport { DieRoll, DieObject, Die, d4, d6, d8, d10, d12, d20, randomQuaternion } from './dice';\nimport { Ref } from 'vue';\n\ninterface Dice {\n  d4: Die;\n  d6: Die;\n  d8: Die;\n  d10: Die;\n  d12: Die;\n  d20: Die;\n}\n\ninterface Picker {\n  die: Die;\n  object: Object3D;\n  position: Vector2;\n  orientation: Quaternion;\n  rotation: number;\n}\n\nfunction loadDice() {\n  return {\n    d4: d4(0.05, 20),\n    d6: d6(0.09, 20),\n    d8: d8(0.09, 20),\n    d10: d10(0.09, 20),\n    d12: d12(0.09, 20),\n    d20: d20(0.09, 20),\n  };\n}\n\nfunction rollDie(position: Vec3): DieRoll {\n  const orientation = randomQuaternion(Math.random);\n\n  const velDir = Math.random() * Math.PI * 2;\n  const velocity = new Vec3(Math.cos(velDir), 0, Math.sin(velDir)).scale(3)\n    .vadd(new Vec3(8, 0, 0));\n\n  const spinDir = randomQuaternion(Math.random);\n  const angularVelocity = spinDir.vmult(Vec3.UNIT_Y.scale(30));\n\n  return {\n    position,\n    orientation,\n    velocity,\n    angularVelocity\n  };\n}\n\nfunction initScene(canvas: HTMLCanvasElement) {\n  const scene = new Scene();\n  const camera = new OrthographicCamera(-canvas.width / 200, canvas.width / 200, canvas.height / 200, -canvas.height / 200);\n  camera.position.set(0, 100, 0);\n  camera.lookAt(0, 0, 0);\n\n  const renderer = new WebGLRenderer({\n    canvas,\n    alpha: true,\n    antialias: true,\n  });\n  renderer.shadowMap.enabled = true;\n  renderer.shadowMap.type = PCFSoftShadowMap;\n\n  const ambientLight = new AmbientLight(0xFFFFFF, 0.4);\n  scene.add(ambientLight);\n\n  const halfDiagonal = Math.sqrt(camera.right * camera.right + camera.top * camera.top);\n\n  const directionalLight1 = new DirectionalLight(0xFFFFFF, 0.6);\n  directionalLight1.position.set(2, 3, -1);\n  directionalLight1.shadow.mapSize.width = 4 * canvas.width;\n  directionalLight1.shadow.mapSize.height = 4 * canvas.height;\n  directionalLight1.shadow.camera.near = -2 * halfDiagonal;\n  directionalLight1.shadow.camera.far = 2 * halfDiagonal;\n  directionalLight1.shadow.camera.top = halfDiagonal;\n  directionalLight1.shadow.camera.bottom = -halfDiagonal;\n  directionalLight1.shadow.camera.left = -halfDiagonal;\n  directionalLight1.shadow.camera.right = halfDiagonal;\n  directionalLight1.castShadow = true;\n  scene.add(directionalLight1);\n\n  const tableGeometry = new PlaneGeometry(2 * camera.right, 2 * camera.top);\n  const tableMaterial = new ShadowMaterial({ opacity: 0.5 });\n  const table = new Mesh(tableGeometry, tableMaterial);\n  table.rotateX(-Math.PI / 2);\n  table.castShadow = false;\n  table.receiveShadow = true;\n  scene.add(table);\n\n  return { scene, camera, renderer };\n}\n\nfunction initWorld(viewport: Vector2) {\n  const world = new World({\n    gravity: new Vec3(0, -30, 0),\n  });\n\n  const wallMaterial = new Material();\n  const floorMaterial = new Material();\n\n  const floor = new Body({\n    type: Body.STATIC,\n    shape: new Plane(),\n    position: new Vec3(0, 0, 0),\n    quaternion: new Quat().setFromVectors(Vec3.UNIT_Z, Vec3.UNIT_Y),\n    material: floorMaterial,\n  });\n\n  const walls = [\n    new Body({\n      type: Body.STATIC,\n      shape: new Plane(),\n      position: new Vec3(-viewport.x / 2, 0, 0),\n      quaternion: new Quat().setFromVectors(Vec3.UNIT_Z, Vec3.UNIT_X),\n      material: wallMaterial,\n    }),\n    new Body({\n      type: Body.STATIC,\n      shape: new Plane(),\n      position: new Vec3(+viewport.x / 2, 0, 0),\n      quaternion: new Quat().setFromVectors(Vec3.UNIT_Z, Vec3.UNIT_X.negate()),\n      material: wallMaterial,\n    }),\n    new Body({\n      type: Body.STATIC,\n      shape: new Plane(),\n      position: new Vec3(0, 0, -viewport.y / 2),\n      quaternion: new Quat().setFromVectors(Vec3.UNIT_Z, Vec3.UNIT_Z),\n      material: wallMaterial,\n    }),\n    new Body({\n      type: Body.STATIC,\n      shape: new Plane(),\n      position: new Vec3(0, 0, +viewport.y / 2),\n      quaternion: new Quat().setFromVectors(Vec3.UNIT_Z, Vec3.UNIT_Z.negate()),\n      material: wallMaterial,\n    }),\n  ];\n\n  world.addBody(floor);\n  for (const body of walls) world.addBody(body);\n\n  world.addContactMaterial(new ContactMaterial(world.defaultMaterial, wallMaterial, { friction: 0 }));\n  world.addContactMaterial(new ContactMaterial(world.defaultMaterial, floorMaterial, { friction: 0.04 }));\n  world.addContactMaterial(new ContactMaterial(world.defaultMaterial, world.defaultMaterial, { friction: 0 }));\n\n  return { world, walls, floor };\n}\n\nexport function initDice(canvas: HTMLCanvasElement, results: Ref<null | number[]>): any {\n  if (document.readyState != 'complete') return window.addEventListener('load', () => initDice(canvas, results));\n\n  const dice = loadDice();\n\n  const box = canvas.getBoundingClientRect();\n  canvas.width = box.width;\n  canvas.height = box.height;\n\n  const { scene, camera, renderer } = initScene(canvas);\n  const viewport = new Vector2(camera.right * 2, camera.top * 2);\n  const { world, floor, walls } = initWorld(viewport);\n\n  // const orbit = new OrbitControls(camera, canvas);\n\n  const objects: DieObject[] = [];\n\n  const allDice = Reflect.ownKeys(dice).map(k => dice[k as keyof Dice]);\n  const pickers = allDice.map((die, i) => {\n    const position = new Vector2(\n      -viewport.x / 2 + 0.5,\n      1 * ((i + 0.5) - allDice.length / 2),\n    );\n\n    const object = Die.createObject(die);\n    object.position.set(position.x, 10, position.y);\n    object.scale.set(0.6, 0.6, 0.6);\n\n    const rotation = new Quaternion().setFromUnitVectors(\n      new Vector3(die.model.faces[0].normal.x, die.model.faces[0].normal.y, die.model.faces[0].normal.z),\n      new Vector3(0, -1, 0)\n    );\n\n    const center = new Vec3();\n    for (const v of die.model.faces[0].vertices) center.vadd(v.point, center);\n    center.scale(1 / die.model.faces[0].vertices.length, center);\n\n    const b = new Vector3();\n    b.copy(die.model.faces[0].vertices[1].point as any);\n    b.sub(center as any);\n    b.normalize();\n    b.applyQuaternion(rotation);\n\n    const q = new Quaternion();\n    if (die.model.faces.length == 6)\n      q.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI * 5 / 4);\n\n    else if (die.model.faces.length == 8)\n      q.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI * 2 / 3);\n\n    q.multiply(new Quaternion().setFromUnitVectors(b, new Vector3(0, 0, 1)));\n    q.multiply(rotation);\n    q.normalize();\n\n    object.quaternion.copy(q);\n    scene.add(object);\n\n    return {\n      die,\n      object,\n      position,\n      orientation: q,\n      rotation: 0,\n    };\n  });\n\n  function hitTest(x: number, y: number) {\n    const pos = new Vector2(\n      (x / canvas.width - 0.5) * viewport.x,\n      (y / canvas.height - 0.5) * viewport.y,\n    );\n\n    const offset = new Vector2();\n    for (const picker of pickers) {\n      offset.copy(pos);\n      offset.sub(picker.position);\n\n      if (offset.length() < 0.5) {\n        return picker;\n      }\n    }\n\n    return null;\n  }\n\n  function add(die: Die, position: Vec3) {\n    const o = Die.create(die);\n    objects.push(o);\n    scene.add(o.object);\n    world.addBody(o.body);\n\n    const roll = rollDie(position);\n    Die.initRoll(o, roll);\n    Die.update(o);\n  }\n\n  let picking: Picker | null = null;\n  function onMouseEvent(e: MouseEvent) {\n    picking = hitTest(e.offsetX, e.offsetY);\n  }\n\n  canvas.addEventListener('mouseenter', onMouseEvent);\n  canvas.addEventListener('mouseleave', onMouseEvent);\n  canvas.addEventListener('mousemove', onMouseEvent);\n\n  canvas.addEventListener('click', e => {\n    const pick = hitTest(e.offsetX, e.offsetY);\n    if (pick == null) return;\n\n    if (!active) {\n      for (const o of objects) {\n        scene.remove(o.object);\n        world.removeBody(o.body);\n      }\n\n      objects.length = 0;\n      results.value = null;\n    }\n\n    active = true;\n    add(pick.die, new Vec3(pick.object.position.x, 5, pick.object.position.z));\n  });\n\n  let active = false;\n  function render() {\n    canvas.style.cursor = picking ? 'pointer' : 'default';\n\n    const axis = new Vector3(3, 1, -3).normalize();\n    for (const picker of pickers) {\n      if (picker == picking || picker.rotation % 50 != 0) {\n        if (picker == picking)\n          picker.rotation += 1;\n        else if (picker.rotation > 45 || picker.rotation < 5)\n          picker.rotation = 0;\n        else if (picker.rotation < 25)\n          picker.rotation -= 5;\n        else\n          picker.rotation += 5;\n\n        picker.rotation %= 50;\n\n        const q = new Quaternion().setFromAxisAngle(axis, picker.rotation * Math.PI / 25);\n        q.multiply(picker.orientation);\n        q.normalize();\n        picker.object.quaternion.copy(q);\n      } else {\n        picker.object.quaternion.copy(picker.orientation);\n      }\n\n      picker.object.updateMatrix();\n    }\n\n    if (active) {\n      world.step(1 / 60);\n\n      for (const o of objects) {\n        if (o.body.type == Body.STATIC) {\n          o.body.velocity.setZero();\n          o.body.angularVelocity.setZero();\n        } else {\n          Die.update(o);\n          if (Die.resolve(o)) {\n            o.body.type = Body.STATIC;\n          }\n        }\n      }\n\n      const done: [Body, Body][] = [];\n      const bumps = world.contacts.map(c => [c.bi, c.bj]);\n      const strength = Math.min(150, 40 * world.time);\n\n      for (const [a, b] of bumps) {\n        if (a == floor || b == floor) continue;\n        if (done.some(c => a == c[0] && b == c[1] || b == c[0] && a == c[1])) continue;\n        done.push([a, b]);\n\n        if (walls.includes(a) || walls.includes(b)) {\n          const [die, wall] = walls.includes(a) ? [b, a] : [a, b];\n          const normal = wall.quaternion.vmult(Vec3.UNIT_Z);\n          die.applyForce(normal.scale(strength));\n        } else {\n          const dir = a.position.vsub(b.position).unit();\n          a.applyForce(dir.scale(strength / 2));\n          b.applyForce(dir.scale(-strength / 2));\n        }\n      }\n\n      active = objects.some(o => o.body.type != Body.STATIC);\n\n      if (!active) {\n        results.value = objects.map(o => o.die.results[o.die.model.faces.indexOf(Die.resolve(o)!)]);\n      }\n      // const results = objects.map(o => Die.resolve(o));\n      // active = results.some(e => e == null);\n    }\n\n    // orbit.update();\n    renderer.render(scene, camera);\n    requestAnimationFrame(render);\n  }\n\n  requestAnimationFrame(render);\n}\n","import { render } from \"./main.vue?vue&type=template&id=7beee240&scoped=true\"\nimport script from \"./main.vue?vue&type=script&lang=js\"\nexport * from \"./main.vue?vue&type=script&lang=js\"\n\nimport \"./main.vue?vue&type=style&index=0&id=7beee240&lang=scss&scoped=true\"\nimport \"./main.vue?vue&type=style&index=1&id=7beee240&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\mfro\\\\Desktop\\\\dnd\\\\dice\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7beee240\"]])\n\nexport default __exports__","import { createApp } from 'vue';\n\nimport App from './main.vue';\n\nconst app = createApp(App);\napp.mount('#app')\n"],"sourceRoot":""}