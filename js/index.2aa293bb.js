(function(e){function t(t){for(var a,i,l=t[0],c=t[1],s=t[2],f=0,d=[];f<l.length;f++)i=l[f],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={index:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"5e9e":function(e,t,n){},"87d0":function(e,t,n){"use strict";n("5e9e")},a00e:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),r=(n("a15b"),n("d3b7"),{ref:"canvas"}),o={key:0,class:"results"};function i(e,t,n,i,l,c){return Object(a["g"])(),Object(a["d"])(a["a"],null,[Object(a["e"])("canvas",r,null,512),i.results?(Object(a["g"])(),Object(a["d"])("span",o,[Object(a["f"])(Object(a["k"])(i.results.join(" + "))+" ",1),i.results.length>1?(Object(a["g"])(),Object(a["d"])(a["a"],{key:0},[Object(a["f"])(" = "+Object(a["k"])(i.results.reduce((function(e,t){return e+t}),0)),1)],64)):Object(a["c"])("",!0)])):Object(a["c"])("",!0)],64)}var l,c,s=n("3835"),u=n("b85c"),f=(n("d81d"),n("1bf2"),n("f8c9"),n("4c53"),n("caad"),n("2532"),n("10a2")),d=n("5a89"),v=n("4f96"),h=n("2909"),m=(n("7db0"),n("4e82"),n("fb6a"),n("cfc3"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("99af"),n("6062"),n("3ca3"),n("ddb0"),n("1c69"));function p(e){var t=e(),n=e(),a=e();return new f["f"](Math.sqrt(1-t)*Math.sin(2*Math.PI*n),Math.sqrt(1-t)*Math.cos(2*Math.PI*n),Math.sqrt(t)*Math.sin(2*Math.PI*a),Math.sqrt(t)*Math.cos(2*Math.PI*a))}function g(e){return function(t,n){function a(e,t,n,a){var r=e.vsub(n),o=t.vsub(n),i=Math.min(1,Math.max(-1,r.dot(o)/r.length()/o.length())),l=Math.acos(i),c=r.cross(o).dot(a);return c>=0?l:2*Math.PI-l}function r(e,t){var n,r=new f["g"],o=Object(u["a"])(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;r.vadd(i,r)}}catch(c){o.e(c)}finally{o.f()}r.scale(1/e.length,r);var l=e[0];return e.slice().sort((function(e,n){return a(l,e,r,t)-a(l,n,r,t)}))}var o,i=[],l=[],c=e.vertices.map((function(e){var n=(new d["g"]).set(e.faces[0].normal.x,e.faces[0].normal.y,e.faces[0].normal.z,e.faces[1].normal.x,e.faces[1].normal.y,e.faces[1].normal.z,e.faces[2].normal.x,e.faces[2].normal.y,e.faces[2].normal.z);n.invert();var a=new d["s"](-t,-t,-t),r=a.applyMatrix3(n),o=new f["g"](r.x,r.y,r.z);return Object(m["a"])(e.faces.every((function(e){return Math.abs(e.normal.dot(o)+t)<1e-6})),"rounding"),e.point.vadd(o)})),v=Object(u["a"])(e.edges);try{for(v.s();!(o=v.n()).done;)for(var h=o.value,p=c[e.vertices.indexOf(h.vertices[0])],g=c[e.vertices.indexOf(h.vertices[1])],w=(new f["f"]).setFromVectors(h.faces[0].normal,h.faces[0].normal),y=(new f["f"]).setFromVectors(h.faces[0].normal,h.faces[1].normal),b=new f["f"],x=0;x<n;++x){w.slerp(y,x/n,b);var j=p.vadd(b.vmult(h.faces[0].normal.scale(t))),M=g.vadd(b.vmult(h.faces[0].normal.scale(t)));w.slerp(y,(x+1)/n,b);var O=p.vadd(b.vmult(h.faces[0].normal.scale(t))),I=g.vadd(b.vmult(h.faces[0].normal.scale(t)));w.slerp(y,(x+.5)/n,b);var T=b.vmult(h.faces[0].normal);i.push(r([j,M,I,O],T).map((function(e){return[e,new d["r"](.5,.5)]}))),l.push(T)}}catch(Q){v.e(Q)}finally{v.f()}for(var A=function(n){var a,o=e.faces[n].vertices.map((function(a){return c[e.vertices.indexOf(a)].vadd(e.faces[n].normal.scale(t))})),s=r(o,e.faces[n].normal),v=new f["g"],h=Object(u["a"])(s);try{for(h.s();!(a=h.n()).done;){var m=a.value;v.vadd(m,v)}}catch(Q){h.e(Q)}finally{h.f()}v.scale(1/s.length,v);var p,g=s[1].vsub(v).unit(),w=g.cross(e.faces[n].normal),y=s.map((function(e){var t=e.vsub(v),n=t.dot(w),a=t.dot(g);return[e,new d["r"](n,a)]})),b=y.reduce((function(e,t){return new d["r"](Math.min(e.x,t[1].x),Math.min(e.y,t[1].y))}),new d["r"]),x=y.reduce((function(e,t){return new d["r"](Math.max(e.x,t[1].x),Math.max(e.y,t[1].y))}),new d["r"]),j=Math.max(-b.x,-b.y,x.x,x.y),M=Object(u["a"])(y);try{for(M.s();!(p=M.n()).done;){var O=p.value;O[1].multiplyScalar(1/j),O[1].x=(O[1].x/2+.5+n)/e.faces.length,O[1].y=O[1].y/2+.5}}catch(Q){M.e(Q)}finally{M.f()}i.push(y),l.push(e.faces[n].normal)},S=0;S<e.faces.length;++S)A(S);for(var q=[],_=[],F=[],P=[],U=0;U<i.length;++U){var N,z=_.length/3,R=Object(u["a"])(i[U]);try{for(R.s();!(N=R.n()).done;){var V=Object(s["a"])(N.value,2),C=V[0],B=V[1];_.push(C.x,C.y,C.z),q.push(B.x,B.y),F.push(l[U].x,l[U].y,l[U].z)}}catch(Q){R.e(Q)}finally{R.f()}P.push(z,z+1,z+2),i[U].length>=4&&P.push(z+2,z+3,z+0),i[U].length>=5&&P.push(z+3,z+4,z+0)}var Z=[],k=new d["c"];k.setAttribute("position",new d["b"](new Float32Array(_),3)),k.setAttribute("normal",new d["b"](new Float32Array(F),3)),k.setAttribute("uv",new d["b"](new Float32Array(q),2)),k.setIndex(P),Z.push(k);var Y,E=Object(u["a"])(c);try{for(E.s();!(Y=E.n()).done;){var X=Y.value,L=new d["q"](t);L.translate(X.x,X.y,X.z);var J=new d["h"];J.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),L.attributes.uv.applyMatrix4(J),Z.push(L)}}catch(Q){E.e(Q)}finally{E.f()}return Z}}function w(e){return new f["c"]({vertices:e.vertices.map((function(e){return e.point})),normals:e.faces.map((function(e){return e.normal})),faces:e.faces.map((function(t){return t.vertices.map((function(t){return e.vertices.indexOf(t)}))}))})}function y(e,t){for(var n=t(1),a=Object(v["a"])(n),r=a[0],o=a.slice(1),i=[],c=[],d=[],p=0;p<r.length;++p){var g={point:r[p],edges:[],faces:[]};i.push(g);for(var w=function(e){var t=i[e],n=g.point.vsub(t.point);if(o.some((function(e){return Math.abs(e-n.length())<1e-6}))){var a={vertices:[g,t],faces:[]};g.edges.push(a),t.edges.push(a),c.push(a)}},y=0;y<p;++y)w(y)}function b(e,t,n){var a=[],r=[[t,[]]];while(r.length>0){var o,i=r.pop(),c=Object(s["a"])(i,2),f=c[0],d=c[1],v=Object(u["a"])(f.edges);try{for(v.s();!(o=v.n()).done;){var m=o.value,p=l.otherVertex(m,f);d.includes(m)||(p==e?a.push([].concat(Object(h["a"])(d),[m])):d.length+1<n&&r.push([p,[].concat(Object(h["a"])(d),[m])]))}}catch(g){v.e(g)}finally{v.f()}}return a}for(var x=2*c.length/e,j=[],M=0,O=i;M<O.length;M++){var I=O[M];j.push.apply(j,Object(h["a"])(b(I,I,x)))}for(var T=function(){var e,t=S[A],n=new Set,a=Object(u["a"])(t);try{for(a.s();!(e=a.n()).done;){var r,o=e.value,i=Object(u["a"])(o.vertices);try{for(i.s();!(r=i.n()).done;){var l=r.value;n.add(l)}}catch(I){i.e(I)}finally{i.f()}}}catch(I){a.e(I)}finally{a.f()}var c=Object(h["a"])(n),s=c[1].point.vsub(c[0].point).cross(c[2].point.vsub(c[0].point)).unit();if(d.find((function(e){return e.normal.almostEquals(s)})))return"continue";var v,m=new f["g"],p=Object(u["a"])(c);try{for(p.s();!(v=p.n()).done;){var g=v.value;m.vadd(g.point,m)}}catch(I){p.e(I)}finally{p.f()}if(m.scale(1/c.length,m),m.dot(s)<0)return"continue";var w,y={normal:s,edges:t,vertices:c},b=Object(u["a"])(c);try{for(b.s();!(w=b.n()).done;){var x=w.value;x.faces.push(y)}}catch(I){b.e(I)}finally{b.f()}var j,M=Object(u["a"])(t);try{for(M.s();!(j=M.n()).done;){var O=j.value;O.faces.push(y)}}catch(I){M.e(I)}finally{M.f()}d.push(y)},A=0,S=j;A<S.length;A++)T();return Object(m["a"])(c.every((function(e){return 2==e.faces.length})),"valid die"),{vertices:i,edges:c,faces:d}}function b(e,t){return function(){var n=document.createElement("canvas");n.width=512*e.faces.length,n.height=512;var a=n.getContext("2d");Object(m["a"])(null!=a,"context"),t(a,(function(e,t,n,r){a.translate(256+512*t,256),a.rotate(n*Math.PI),a.translate(0,r),a.fillText(e,0,0),a.resetTransform()}));var r=new d["d"](n);return r}}function x(e,t,n,a,r){return function(o,i){return{model:e,shape:t,texture:n(),geometry:a(o,i),results:r}}}(function(e){function t(e,t){return e.vertices[1]==t?e.vertices[0]:e.vertices[1]}e.otherVertex=t})(l||(l={})),function(e){function t(e){var t=new d["j"]({map:e.texture}),n=new d["f"];return n.add.apply(n,Object(h["a"])(e.geometry.map((function(e){var n=new d["i"](e,t);return n.castShadow=!0,n})))),n}function n(e){return new f["a"]({mass:1,shape:e.shape})}function a(e){var a=n(e),r=t(e);return{die:e,body:a,object:r}}function r(e,t){e.body.position=t.position.clone(),e.body.quaternion=t.orientation.clone(),e.body.velocity=t.velocity.clone(),e.body.angularVelocity=t.angularVelocity.clone()}function o(e){e.object.position.set(e.body.position.x,e.body.position.y,e.body.position.z),e.object.quaternion.set(e.body.quaternion.x,e.body.quaternion.y,e.body.quaternion.z,e.body.quaternion.w)}function i(e){var t=e.body.angularVelocity.lengthSquared(),n=e.body.velocity.lengthSquared(),a=e.die.model.faces.find((function(t){return e.body.quaternion.vmult(t.normal).dot(f["g"].UNIT_Y)<-.99}));return t<.001&&n<.001&&void 0!==a?a:null}e.createObject=t,e.createBody=n,e.create=a,e.initRoll=r,e.update=o,e.resolve=i}(c||(c={}));var j=y(4,(function(e){var t=20*e/16,n=(new f["f"]).setFromAxisAngle(f["g"].UNIT_Z,-Math.acos(-1/3)),a=(new f["f"]).setFromAxisAngle(f["g"].UNIT_Y,2*Math.PI/3).mult(n),r=(new f["f"]).setFromAxisAngle(f["g"].UNIT_Y,2*-Math.PI/3).mult(n),o=f["g"].UNIT_Y.scale(t*Math.sqrt(6)/4),i=[o,n.vmult(o),a.vmult(o),r.vmult(o)];return[i,t]})),M=w(j),O=b(j,(function(e,t){e.fillStyle="#333",e.fillRect(0,0,2048,512),e.textAlign="center",e.textBaseline="middle",e.font="bold 130px Roboto",e.fillStyle="red",t("1",0,0,-125),t("2",0,2/3,-125),t("3",0,4/3,-125),t("1",1,0,-125),t("4",1,4/3,-125),t("3",1,2/3,-125),t("1",2,0,-125),t("4",2,2/3,-125),t("2",2,4/3,-125),t("4",3,0,-125),t("2",3,4/3,-125),t("3",3,2/3,-125)})),I=g(j),T=[2,3,4,1],A=x(j,M,O,I,T),S=y(6,(function(e){for(var t=e,n=[],a=0;a<8;++a)n.push(new f["g"](1&a?t/2:-t/2,2&a?t/2:-t/2,4&a?t/2:-t/2));return[n,t]})),q=w(S),_=b(S,(function(e,t){e.fillStyle="#333",e.fillRect(0,0,3072,512),e.textAlign="center",e.textBaseline="middle",e.font="bold 240px Roboto",e.fillStyle="red",t("1",0,3/4,20),t("2",2,1/4,20),t("3",1,7/4,20),t("4",3,1/4,20),t("5",5,7/4,20),t("6",4,1/4,20)})),F=g(S),P=[6,4,5,3,1,2],U=x(S,q,_,F,P),N=y(8,(function(e){var t=18.5*e/16,n=t/Math.SQRT2,a=[new f["g"](+n,0,0),new f["g"](-n,0,0),new f["g"](0,+n,0),new f["g"](0,-n,0),new f["g"](0,0,+n),new f["g"](0,0,-n)];return[a,t]})),z=w(N),R=b(N,(function(e,t){e.fillStyle="#333",e.fillRect(0,0,4096,512),e.textAlign="center",e.textBaseline="middle",e.font="bold 200px Roboto",e.fillStyle="red",t("1",0,4/3,0),t("2",1,4/3,0),t("3",2,2/3,0),t("4",3,2/3,0),t("5",5,4/3,0),t("6",4,4/3,0),t("7",6,2/3,0),t("8",7,2/3,0)})),V=g(N),C=[8,7,6,5,3,4,2,1],B=x(N,z,R,V,C),Z=y(10,(function(e){var t=e,n=2*Math.PI/5,a=.27*Math.PI,r=Math.sin(a)*t,o=Math.cos(a)*t,i=Math.cos(n/2)*r,l=Math.atan(i/o),c=Math.PI-a-l,s=t/Math.sin(l),u=s*Math.sin(c),d=Math.sqrt(u*u/4+t*t-u*t*Math.cos(a)),v=Math.asin(t*Math.sin(a)/d),h=Math.PI/2-v,m=(new f["f"]).setFromAxisAngle(f["g"].UNIT_Y,n),p=(new f["f"]).setFromAxisAngle(f["g"].UNIT_Z,h),g=f["g"].UNIT_Y.scale(u/2),w=f["g"].UNIT_X.scale(d),y=[g,p.vmult(w),m.vmult(p.vmult(w)),m.vmult(m.vmult(p.vmult(w))),m.vmult(m.vmult(m.vmult(p.vmult(w)))),m.vmult(m.vmult(m.vmult(m.vmult(p.vmult(w))))),g.negate(),p.vmult(w.negate()),m.vmult(p.vmult(w.negate())),m.vmult(m.vmult(p.vmult(w.negate()))),m.vmult(m.vmult(m.vmult(p.vmult(w.negate())))),m.vmult(m.vmult(m.vmult(m.vmult(p.vmult(w.negate())))))];return[y,y[1].vsub(y[0]).length(),y[7].vsub(y[3]).length()]})),k=w(Z),Y=b(Z,(function(e,t){e.fillStyle="#333",e.fillRect(0,0,5120,512),e.textAlign="center",e.textBaseline="middle",e.font="bold 160px Roboto",e.fillStyle="red",t("1",0,0,0),t("2",8,1,0),t("3",4,0,0),t("4",5,1,0),t("5",2,0,0),t("6",9,1,0),t("7",1,0,0),t("8",7,1,0),t("9",3,0,0),t("10",6,1,0)})),E=g(Z),X=[10,4,6,2,8,7,1,3,9,5],L=x(Z,k,Y,E,X),J=y(12,(function(e){for(var t=.5*e,n=(1+Math.sqrt(5))/2,a=[new f["g"](1,1,1),new f["g"](-1,1,1),new f["g"](1,-1,1),new f["g"](1,1,-1),new f["g"](-1,-1,1),new f["g"](1,-1,-1),new f["g"](-1,1,-1),new f["g"](-1,-1,-1),new f["g"](0,n,1/n),new f["g"](0,-n,1/n),new f["g"](0,n,-1/n),new f["g"](0,-n,-1/n),new f["g"](1/n,0,n),new f["g"](1/n,0,-n),new f["g"](-1/n,0,n),new f["g"](-1/n,0,-n),new f["g"](n,1/n,0),new f["g"](-n,1/n,0),new f["g"](n,-1/n,0),new f["g"](-n,-1/n,0)],r=0,o=a;r<o.length;r++){var i=o[r];i.scale(t*n/2,i)}return[a,t]})),Q=w(J),K=g(J),D=b(J,(function(e,t){e.fillStyle="#333",e.fillRect(0,0,6144,512),e.textAlign="center",e.textBaseline="middle",e.font="bold 240px Roboto",e.fillStyle="red",t("1",0,0,20),t("2",2,1.6,20),t("3",1,.4,20),t("4",7,0,20),t("5",6,1.2,20),t("6",5,1.2,20),t("7",3,1.6,20),t("8",8,1.6,20),t("9",4,.8,20),t("10",10,.8,20),t("11",9,1.6,20),t("12",11,1.2,20)})),G=[12,10,11,6,4,7,8,9,5,2,3,1],H=x(J,Q,D,K,G),W=y(20,(function(e){for(var t=.8*e,n=(1+Math.sqrt(5))/2,a=[new f["g"](0,1,n),new f["g"](0,-1,n),new f["g"](0,1,-n),new f["g"](0,-1,-n),new f["g"](1,n,0),new f["g"](-1,n,0),new f["g"](1,-n,0),new f["g"](-1,-n,0),new f["g"](n,0,1),new f["g"](n,0,-1),new f["g"](-n,0,1),new f["g"](-n,0,-1)],r=0,o=a;r<o.length;r++){var i=o[r];i.scale(t/2,i)}return[a,20,t]})),$=w(W),ee=g(W),te=b(W,(function(e,t){e.fillStyle="#333",e.fillRect(0,0,10240,512),e.textAlign="center",e.textBaseline="middle",e.font="bold 180px Roboto",e.fillStyle="red",t("1",0,0,35),t("2",12,0,35),t("3",1,2/3,35),t("4",13,2/3,35),t("5",10,0,35),t("6",7,0,35),t("7",2,4/3,35),t("8",18,2/3,35),t("9",6,2/3,35),t("10",16,0,35),t("11",19,0,35),t("12",9,4/3,35),t("13",17,4/3,35),t("14",14,2/3,35),t("15",11,0,35),t("16",5,0,35),t("17",3,4/3,35),t("18",8,2/3,35),t("19",4,2/3,35),t("20",15,0,35)})),ne=[20,18,14,4,2,5,12,15,3,9,16,6,19,17,7,1,11,8,13,10],ae=x(W,$,te,ee,ne);function re(){return{d4:A(.05,20),d6:U(.09,20),d8:B(.09,20),d10:L(.09,20),d12:H(.09,20),d20:ae(.09,20)}}function oe(e){var t=p(Math.random),n=Math.random()*Math.PI*2,a=new f["g"](Math.cos(n),0,Math.sin(n)).scale(3).vadd(new f["g"](8,0,0)),r=p(Math.random),o=r.vmult(f["g"].UNIT_Y.scale(30));return{position:e,orientation:t,velocity:a,angularVelocity:o}}function ie(e){var t=new d["o"],n=new d["k"](-e.width/200,e.width/200,e.height/200,-e.height/200);n.position.set(0,100,0),n.lookAt(0,0,0);var a=new d["t"]({canvas:e,alpha:!0,antialias:!0});a.shadowMap.enabled=!0,a.shadowMap.type=d["l"];var r=new d["a"](16777215,.4);t.add(r);var o=Math.sqrt(n.right*n.right+n.top*n.top),i=new d["e"](16777215,.6);i.position.set(2,3,-1),i.shadow.mapSize.width=4*e.width,i.shadow.mapSize.height=4*e.height,i.shadow.camera.near=-2*o,i.shadow.camera.far=2*o,i.shadow.camera.top=o,i.shadow.camera.bottom=-o,i.shadow.camera.left=-o,i.shadow.camera.right=o,i.castShadow=!0,t.add(i);var l=new d["m"](2*n.right,2*n.top),c=new d["p"]({opacity:.5}),s=new d["i"](l,c);return s.rotateX(-Math.PI/2),s.castShadow=!1,s.receiveShadow=!0,t.add(s),{scene:t,camera:n,renderer:a}}function le(e){var t=new f["h"]({gravity:new f["g"](0,-30,0)}),n=new f["d"],a=new f["d"],r=new f["a"]({type:f["a"].STATIC,shape:new f["e"],position:new f["g"](0,0,0),quaternion:(new f["f"]).setFromVectors(f["g"].UNIT_Z,f["g"].UNIT_Y),material:a}),o=[new f["a"]({type:f["a"].STATIC,shape:new f["e"],position:new f["g"](-e.x/2,0,0),quaternion:(new f["f"]).setFromVectors(f["g"].UNIT_Z,f["g"].UNIT_X),material:n}),new f["a"]({type:f["a"].STATIC,shape:new f["e"],position:new f["g"](+e.x/2,0,0),quaternion:(new f["f"]).setFromVectors(f["g"].UNIT_Z,f["g"].UNIT_X.negate()),material:n}),new f["a"]({type:f["a"].STATIC,shape:new f["e"],position:new f["g"](0,0,-e.y/2),quaternion:(new f["f"]).setFromVectors(f["g"].UNIT_Z,f["g"].UNIT_Z),material:n}),new f["a"]({type:f["a"].STATIC,shape:new f["e"],position:new f["g"](0,0,+e.y/2),quaternion:(new f["f"]).setFromVectors(f["g"].UNIT_Z,f["g"].UNIT_Z.negate()),material:n})];t.addBody(r);for(var i=0,l=o;i<l.length;i++){var c=l[i];t.addBody(c)}return t.addContactMaterial(new f["b"](t.defaultMaterial,n,{friction:0})),t.addContactMaterial(new f["b"](t.defaultMaterial,a,{friction:.04})),t.addContactMaterial(new f["b"](t.defaultMaterial,t.defaultMaterial,{friction:0})),{world:t,walls:o,floor:r}}function ce(e,t){if("complete"!=document.readyState)return window.addEventListener("load",(function(){return ce(e,t)}));var n=re(),a=e.getBoundingClientRect();e.width=a.width,e.height=a.height;var r=ie(e),o=r.scene,i=r.camera,l=r.renderer,v=new d["r"](2*i.right,2*i.top),h=le(v),m=h.world,p=h.floor,g=h.walls,w=[],y=Reflect.ownKeys(n).map((function(e){return n[e]})),b=y.map((function(e,t){var n=new d["r"](-v.x/2+.5,1*(t+.5-y.length/2)),a=c.createObject(e);a.position.set(n.x,10,n.y),a.scale.set(.6,.6,.6);var r,i=(new d["n"]).setFromUnitVectors(new d["s"](e.model.faces[0].normal.x,e.model.faces[0].normal.y,e.model.faces[0].normal.z),new d["s"](0,-1,0)),l=new f["g"],s=Object(u["a"])(e.model.faces[0].vertices);try{for(s.s();!(r=s.n()).done;){var h=r.value;l.vadd(h.point,l)}}catch(g){s.e(g)}finally{s.f()}l.scale(1/e.model.faces[0].vertices.length,l);var m=new d["s"];m.copy(e.model.faces[0].vertices[1].point),m.sub(l),m.normalize(),m.applyQuaternion(i);var p=new d["n"];return 6==e.model.faces.length?p.setFromAxisAngle(new d["s"](0,1,0),5*Math.PI/4):8==e.model.faces.length&&p.setFromAxisAngle(new d["s"](0,1,0),2*Math.PI/3),p.multiply((new d["n"]).setFromUnitVectors(m,new d["s"](0,0,1))),p.multiply(i),p.normalize(),a.quaternion.copy(p),o.add(a),{die:e,object:a,position:n,orientation:p,rotation:0}}));function x(t,n){var a,r=new d["r"]((t/e.width-.5)*v.x,(n/e.height-.5)*v.y),o=new d["r"],i=Object(u["a"])(b);try{for(i.s();!(a=i.n()).done;){var l=a.value;if(o.copy(r),o.sub(l.position),o.length()<.5)return l}}catch(c){i.e(c)}finally{i.f()}return null}function j(e,t){var n=c.create(e);w.push(n),o.add(n.object),m.addBody(n.body);var a=oe(t);c.initRoll(n,a),c.update(n)}var M=null;function O(e){M=x(e.offsetX,e.offsetY)}e.addEventListener("mouseenter",O),e.addEventListener("mouseleave",O),e.addEventListener("mousemove",O),e.addEventListener("click",(function(e){var n=x(e.offsetX,e.offsetY);if(null!=n){if(!I){var a,r=Object(u["a"])(w);try{for(r.s();!(a=r.n()).done;){var i=a.value;o.remove(i.object),m.removeBody(i.body)}}catch(l){r.e(l)}finally{r.f()}w.length=0,t.value=null}I=!0,j(n.die,new f["g"](n.object.position.x,5,n.object.position.z))}}));var I=!1;function T(){e.style.cursor=M?"pointer":"default";var n,a=new d["s"](3,1,-3).normalize(),r=Object(u["a"])(b);try{for(r.s();!(n=r.n()).done;){var v=n.value;if(v==M||v.rotation%50!=0){v==M?v.rotation+=1:v.rotation>45||v.rotation<5?v.rotation=0:v.rotation<25?v.rotation-=5:v.rotation+=5,v.rotation%=50;var h=(new d["n"]).setFromAxisAngle(a,v.rotation*Math.PI/25);h.multiply(v.orientation),h.normalize(),v.object.quaternion.copy(h)}else v.object.quaternion.copy(v.orientation);v.object.updateMatrix()}}catch(P){r.e(P)}finally{r.f()}if(I){m.step(1/60);var y,x=Object(u["a"])(w);try{for(x.s();!(y=x.n()).done;){var j=y.value;j.body.type==f["a"].STATIC?(j.body.velocity.setZero(),j.body.angularVelocity.setZero()):(c.update(j),c.resolve(j)&&(j.body.type=f["a"].STATIC))}}catch(P){x.e(P)}finally{x.f()}var O,A=[],S=m.contacts.map((function(e){return[e.bi,e.bj]})),q=Math.min(150,40*m.time),_=Object(u["a"])(S);try{var F=function(){var e=Object(s["a"])(O.value,2),t=e[0],n=e[1];if(t==p||n==p)return"continue";if(A.some((function(e){return t==e[0]&&n==e[1]||n==e[0]&&t==e[1]})))return"continue";if(A.push([t,n]),g.includes(t)||g.includes(n)){var a=g.includes(t)?[n,t]:[t,n],r=Object(s["a"])(a,2),o=r[0],i=r[1],l=i.quaternion.vmult(f["g"].UNIT_Z);o.applyForce(l.scale(q))}else{var c=t.position.vsub(n.position).unit();t.applyForce(c.scale(q/2)),n.applyForce(c.scale(-q/2))}};for(_.s();!(O=_.n()).done;)F()}catch(P){_.e(P)}finally{_.f()}I=w.some((function(e){return e.body.type!=f["a"].STATIC})),I||(t.value=w.map((function(e){return e.die.results[e.die.model.faces.indexOf(c.resolve(e))]})))}l.render(o,i),requestAnimationFrame(T)}requestAnimationFrame(T)}var se={name:"dnd-dice",setup:function(e){var t=Object(a["j"])(null),n=Object(a["j"])(null);return Object(a["l"])(t,(function(e){ce(e,n)})),{canvas:t,results:n}}},ue=(n("ce5a"),n("87d0"),n("6b0d")),fe=n.n(ue);const de=fe()(se,[["render",i],["__scopeId","data-v-6f27394d"]]);var ve=de,he=Object(a["b"])(ve);he.mount("#app")},ce5a:function(e,t,n){"use strict";n("a00e")}});
//# sourceMappingURL=index.2aa293bb.js.map